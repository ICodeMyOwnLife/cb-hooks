!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("json2mq")):"function"==typeof define&&define.amd?define(["exports","react","json2mq"],e):e((n=n||self).cbHooks={},n.react,n.json2mq)}(this,function(n,e,t){t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r=function(n,t){var r=e.useRef(n);return e.useLayoutEffect(function(){r.current=n},t),r},u=function(n,e){switch(e.type){case"append":return[].concat(n,[e.payload]);case"prepend":return[e.payload].concat(n);case"filter":return n.filter(e.payload);default:return n}},o=function(){return{}},c=function(){return"undefined"!=typeof window&&void 0!==window.document},i=function(){return c()?{x:window.scrollX,y:window.scrollY}:{}},a=function(){return c()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{}},f=function(n){return function(n){return n instanceof Object&&n.nativeEvent instanceof Event}(n)&&n.persist()},l=function(n){return function(t,u,o){var c=r(t),i=e.useRef(n(t,u,o));return e.useEffect(function(){return i.current=n(function(){return c.current.apply(c,arguments)},u,o),function(){var n;return null==(n=i.current)?void 0:n.cancel()}},[c,o,u]),e.useCallback(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.forEach(f),i.current.apply(i,e)},[])}},s=function(n,e){var t,r=null,u=null,o=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return u=c,null===r&&(r=setTimeout(function(){null!==u&&(t=n.apply(void 0,u),u=null),r=null},e)),t};return o.cancel=function(){null!==r&&clearTimeout(r),r=null,u=null},o},d=l(s),v=function(n){return function(t,u,o,c){var i=e.useState(),a=i[0],f=i[1],l=r(t),s=e.useRef(n(t,o,c));return e.useEffect(function(){return s.current=n(function(){var n=l.current.apply(l,arguments);return f(n),n},o,c),function(){var n;return null==(n=s.current)?void 0:n.cancel()}},[l,c,o]),e.useEffect(function(){s.current.apply(s,u)},u),a}},p=v(s),m=function(n,e,t){var r;n&&(!t||(r=e.target)instanceof Object&&"matches"in r&&e.target.matches(t))&&n(e)},y=function(n,t,u,o){var c=void 0===o?{}:o,i=c.capture,a=c.once,f=c.passive,l=c.selectors,s=c.usingAnimationFrame,d=c.enabled,v=void 0===d||d,p=r(u),y=e.useRef(0);e.useEffect(function(){if(v){var e=function(n){return n instanceof Function?n():n}(n);if(e){var r=function(n){s?(cancelAnimationFrame(y.current),y.current=requestAnimationFrame(function(){return m(p.current,n,l)})):m(p.current,n,l)},u=Array.isArray(t)?t:[t];return u.forEach(function(n){return e.addEventListener(n,r,{capture:i,once:a,passive:f})}),function(){s&&y.current&&cancelAnimationFrame(y.current),u.forEach(function(n){return e.removeEventListener(n,r,{capture:i})})}}}},[n,i,a,f,l,s,v].concat(t))},h=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.useCallback(function(n){var e=n.target.checked;return t.forEach(function(n){return null==n?void 0:n(Boolean(e))})},t)},g=function(n){var t=e.useRef(n);return{set:function(n){t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},b=function(n,t){void 0===t&&(t=null);for(var r=arguments.length,u=new Array(r>2?r-2:0),o=2;o<r;o++)u[o-2]=arguments[o];return e.useCallback(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return null==n?void 0:n.apply(t,[].concat(u,r))},[n].concat(u))},w=function(n,e,t){var r,u=void 0===t?{trailing:!0}:t,o=u.leading,c=u.trailing,i=null,a=null,f=function(){for(var t=arguments.length,u=new Array(t),f=0;f<t;f++)u[f]=arguments[f];return i=u,null!==a?clearTimeout(a):o&&(r=n.apply(void 0,i),i=null),a=setTimeout(function(){c&&null!==i&&(r=n.apply(void 0,i),i=null),a=null},e),r};return f.cancel=function(){null!==a&&clearTimeout(a),i=null,a=null},f},E=l(w),S=v(w),k=function(n){return e.useEffect(n,[])},C=function(n){return k(n)},O=function(n,t,u){void 0===u&&(u=[]);var o=r(t);e.useEffect(function(){var e=o.current,t=("function"==typeof e?e():document.querySelector(e))||document.createElement("link");t instanceof HTMLLinkElement&&(Object.assign(t,n),document.head.appendChild(t))},u)};function A(){return(A=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function R(n){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function F(n,e){return(F=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function j(n,e,t){return(j=T()?Reflect.construct:function(n,e,t){var r=[null];r.push.apply(r,e);var u=new(Function.bind.apply(n,r));return t&&F(u,t.prototype),u}).apply(null,arguments)}function I(n){var e="function"==typeof Map?new Map:void 0;return(I=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(n))return e.get(n);e.set(n,t)}function t(){return j(n,arguments,R(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),F(t,n)})(n)}function L(n,e){if(null==n)return{};var t,r,u={},o=Object.keys(n);for(r=0;r<o.length;r++)e.indexOf(t=o[r])>=0||(u[t]=n[t]);return u}var P={loading:!1},x={loading:!0},M=function(n,t,r,u){void 0===t&&(t=[]),void 0===r&&(r=P);var o=e.useState(r),c=o[0],i=o[1];return e.useEffect(function(){var e=!1,t=n();if(t)return i(x),t.then(function(n){e||i({loading:!1,result:n})}).catch(function(n){e||i({loading:!1,error:n})}),function(){e=!0,null==u||u()};i(P)},t),c},q=function(n){var e,t;function r(e,t){var r;return(r=n.call(this,e||"Fetch Error")||this).status=t,r}return t=n,(e=r).prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t,r}(I(Error)),H=function(n,t){return function(r,u,o,c){var i=e.useRef();return M(function(){try{var e=new AbortController;return i.current=e,Promise.resolve(n(r,A({},u,{signal:e.signal}))).then(function(n){var e=!1;function r(t){if(e)return t;throw new q(n.statusText,n.status)}var u=function(){if(n.ok)return Promise.resolve(t(n)).then(function(n){return e=!0,n})}();return u&&u.then?u.then(r):r(u)})}catch(n){return Promise.reject(n)}},o,c,function(){var n;return null==(n=i.current)?void 0:n.abort()})}},_=H(fetch,function(n){return n.json()}),W=H(fetch,function(n){return n.arrayBuffer()}),D=H(fetch,function(n){return n.blob()}),U=H(fetch,function(n){return n.formData()}),B=H(fetch,function(n){return Promise.resolve(n.body)}),V=H(fetch,function(n){return n.text()}),z=function(){return e.useReducer(o,{})},N=function(n,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var u=e.useCallback(function(e){var t;!document.fullscreenElement||!1!==e&&void 0!==e||document.exitFullscreen(),document.fullscreenElement||!0!==e&&void 0!==e||null==(t=n.current)||null==t.requestFullscreen||t.requestFullscreen()},[n]);return y(document,"fullscreenchange",t),y(document,"fullscreenerror",r),u},Q=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.useCallback(function(n){var e=n.target.value;return t.forEach(function(n){return null==n?void 0:n(Number(e))})},t)},X=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.useCallback(function(n){var e=n.target.value;return t.forEach(function(n){return null==n?void 0:n(String(e))})},t)};function Y(n,e){try{var t=n()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var G=function(n,t,u,o){void 0===o&&(o=[]);var c=r(t);e.useLayoutEffect(function(){var e=n();if(e&&e.length){var t=new IntersectionObserver(function(n,e){return null==c.current?void 0:c.current(n,e)},u);return e.forEach(function(n){return t.observe(n)}),function(){return t.disconnect()}}},o)},J=function(n){return n instanceof Object},K=function(){var n=e.useRef(!1);return k(function(){return n.current=!0,function(){n.current=!1}}),e.useCallback(function(){return n.current},[])},Z=function(n){return n.dataset.src},$=function(n,t,r){return function(u,o){void 0===o&&(o=P);var c=K(),i=e.useState(o),a=i[0],f=i[1];return e.useEffect(function(){if(t(u)){var e=u.id&&document.querySelector(n+"#"+u.id)||document.createElement(n);Object.assign(e,u);var o=function(){c()&&f(P)},i=function(n){c()&&f({loading:!1,error:n.error})};return e.addEventListener("load",o,!1),e.addEventListener("error",i,!1),f(x),r(e),function(){e.removeEventListener("load",o,!1),e.removeEventListener("error",i,!1)}}f(P)},[u,c]),a}},nn=$("link",function(n){var e=n.href;return c()&&!!e&&!document.querySelector('link[href="'+e+'"]')},function(n){return document.head.appendChild(n)}),en=function(n){return e=n,Object.fromEntries(["matches","media"].map(function(n){return[n,e[n]]}));var e},tn=function(n){return y(document,"visibilitychange",function(){return null==n?void 0:n(document.visibilityState)})},rn=function(n,e){var t,r=null,u=setInterval(function(){r&&(t=n.apply(void 0,r),r=null)},e),o=function(){for(var n=arguments.length,e=new Array(n),u=0;u<n;u++)e[u]=arguments[u];return r=e,t};return o.cancel=function(){clearInterval(u),r=null},o},un=l(rn),on=v(rn),cn=$("script",function(n){var e=n.src;return c()&&!!e&&!document.querySelector('script[src="'+e+'"]')},function(n){return document.body.appendChild(n)}),an=function(n){return null==n?void 0:n.getAttribute("id")},fn=function(n,e,t){var r,u=void 0===t?{leading:!0,trailing:!0}:t,o=u.leading,c=u.trailing,i=null,a=null,f=function(){for(var t=arguments.length,u=new Array(t),f=0;f<t;f++)u[f]=arguments[f];return i=u,null===a&&(o&&(r=n.apply(void 0,i),i=null),a=setTimeout(function(){c&&null!==i&&(r=n.apply(void 0,i),i=null),a=null},e)),r};return f.cancel=function(){null!==a&&clearTimeout(a),i=null,a=null},f},ln=l(fn),sn=v(fn),dn=function(n){return k(function(){return n})};n.useAnimationFrame=function(n,t){void 0===t&&(t=[]);var u=r(n);e.useEffect(function(){var n=requestAnimationFrame(function(n){return null==u.current?void 0:u.current(n)});return function(){return cancelAnimationFrame(n)}},t)},n.useArray=function(n){void 0===n&&(n=[]);var t=e.useReducer(u,n),r=t[1];return[t[0],e.useCallback(function(n){return r({type:"append",payload:n})},[r]),e.useCallback(function(n){return r({type:"prepend",payload:n})},[r]),e.useCallback(function(n){return r({type:"filter",payload:n})},[r])]},n.useAudit=d,n.useAuditValue=p,n.useBeforeUnload=function(n,e){return void 0===n&&(n=!0),void 0===e&&(e=""),y(window,"beforeunload",function(t){if("function"==typeof n?n():n)return t.preventDefault(),t.returnValue=e,e})},n.useCallbackWithCleanup=function(n,t){void 0===t&&(t=[]);var u=r(n),o=e.useRef();return e.useCallback(function(){o.current&&o.current();for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];o.current=null==u.current?void 0:u.current.apply(u,e)},t)},n.useCheckInput=function(n){void 0===n&&(n=!1);var t=e.useState(n),r=t[1];return[t[0],r,h(r)]},n.useCurrent=g,n.useCurryFunction=b,n.useDebounce=E,n.useDebounceValue=S,n.useDidMount=C,n.useDidUpdate=function(n,t){var r=e.useRef(!1);e.useEffect(r.current?n:function(){r.current=!0},t)},n.useEffectOnce=k,n.useEvent=y,n.useFavicon=function(n){return O({href:n,rel:"shortcut icon",type:"image/x-icon"},"link[rel='shortcut icon']",[n])},n.useFetch=_,n.useFetchArrayBuffer=W,n.useFetchBlob=D,n.useFetchFormData=U,n.useFetchStream=B,n.useFetchText=V,n.useForceUpdate=function(){return z()[1]},n.useFullscreen=function(n){var t=e.useState(!1),r=t[0],u=t[1],o=N(n,function(){return u(!!document.fullscreenElement&&document.fullscreenElement===n.current)});return[r,o,b(o,null,!0),b(o,null,!1)]},n.useHandleChangeCheck=h,n.useHandleChangeFile=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.useCallback(function(n){var e=n.target.files;return t.forEach(function(n){return null==n?void 0:n(e)})},t)},n.useHandleChangeNumber=Q,n.useHandleChangeText=X,n.useInfiniteScroll=function(n,t){var r=e.useRef(!1),u="boolean"==typeof(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:void 0,o=J(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:J(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:void 0;G(function(){return n.current&&[n.current]},function(n){try{var e=function(){r.current=!1};if(u||r.current||n.every(function(n){return!n.isIntersecting}))return Promise.resolve();r.current=!0;var o=Y(function(){return Promise.resolve(Promise.resolve(t())).then(function(){})},function(){});return Promise.resolve(o&&o.then?o.then(e):e())}catch(n){return Promise.reject(n)}},o)},n.useIntersectionObserver=function(n,e,t){return G(function(){return n.current&&[n.current]},e,t,[t])},n.useIntersectionObserverEffect=G,n.useInterval=function(n,t){var u=t.period,o=t.leading,c=t.running,i=t.deps,a=void 0===i?[u,o,c]:i,f=r(n);e.useEffect(function(){var n;return c&&(o&&(null==f.current||f.current()),n=setInterval(function(){return null==f.current?void 0:f.current()},u)),function(){n&&clearInterval(n)}},a)},n.useIsMounted=K,n.useLazyLoad=function(n){void 0===n&&(n={});var t=n.getSrc,r=void 0===t?Z:t,u=L(n,["getSrc"]),o=e.useRef(new Map),c=e.useCallback(function(n){if("string"==typeof n){var e=n;return function(n){o.current.set(n,e)}}if(n instanceof HTMLImageElement){var t=n,u=r(t);u&&o.current.set(t,u)}},[r]);return G(function(){return Array.from(o.current.keys())},function(n,e){return n.forEach(function(n){var t=n.target;if(n.isIntersecting&&t instanceof HTMLImageElement){var u=o.current.get(t)||r(t);u&&(t.src=u),e.unobserve(t)}})},u),c},n.useLink=nn,n.useMediaQuery=function(n,r){void 0===r&&(r={media:"",matches:!1});var u="string"==typeof n?n:t(n),o=e.useState(c()?function(){return en(window.matchMedia(u))}:r),i=o[0],a=o[1];return e.useEffect(function(){var n=window.matchMedia(u),e=function(n){a(n)};return a(en(n)),n.addListener(e),function(){return n.removeListener(e)}},[u]),i},n.useMutationObserver=function(n,t,u){var o=r(t);e.useLayoutEffect(function(){if(n.current){var e=new MutationObserver(function(n,e){return null==o.current?void 0:o.current(n,e)});return e.observe(n.current,u),function(){return e.disconnect()}}},[o,n,u])},n.useNumberInput=function(n){void 0===n&&(n=0);var t=e.useState(n),r=t[1];return[t[0],r,Q(r)]},n.useOnClickOutside=function(n,e){return y(document,["mousedown","touchstart"],function(t){e&&n.current&&!n.current.contains(t.target)&&e(t)})},n.usePageVisibility=tn,n.usePageVisibilityState=function(){var n=e.useState(document.visibilityState),t=n[0];return tn(n[1]),t},n.usePrevious=function(n){var t=e.useRef();return e.useEffect(function(){t.current=n}),t.current},n.usePromise=M,n.usePromiseCallback=function(n,t,r){void 0===t&&(t=[]),void 0===r&&(r=P);var u=K(),o=e.useState(r),c=o[0],i=o[1],a=g();return[c,e.useCallback(function(){var e=n.apply(void 0,arguments);a.set(e),e?(i(x),e.then(function(n){a.is(e)&&u()&&i({loading:!1,result:n})}).catch(function(n){a.is(e)&&u()&&i({loading:!1,error:n})})):i(P)},t)]},n.useResizeObserver=function(n,t){var u=r(t);e.useLayoutEffect(function(){if(n.current){var e=new ResizeObserver(function(n){return null==u.current?void 0:u.current(n)});return e.observe(n.current),function(){return e.disconnect()}}},[u,n])},n.useSample=un,n.useSampleValue=on,n.useScript=cn,n.useScrollSpy=function(n){void 0===n&&(n={threshold:1});var t=n.getId,r=void 0===t?an:t,u=L(n,["getId"]),o=e.useState(),c=o[0],i=o[1],a=e.useRef(new Map),f=e.useRef(new Set),l=e.useCallback(function(n){if("string"==typeof n){var e=n;return function(n){a.current.set(n,e)}}if(n instanceof Element){var t=n,u=r(t);u&&a.current.set(t,u)}},[r]);return G(function(){return Array.from(a.current.keys())},function(n){if(n.forEach(function(n){var e=n.target;n.isIntersecting?f.current.add(e):f.current.delete(e)}),f.current.size){var e=Array.from(f.current).reduce(function(n,e){return n.getBoundingClientRect().top<e.getBoundingClientRect().top?n:e}),t=a.current.get(e)||r(e);"string"==typeof t&&i(t)}},u),[c,l]},n.useTextInput=function(n){void 0===n&&(n="");var t=e.useState(n),r=t[1];return[t[0],r,X(r)]},n.useThrottle=ln,n.useThrottleValue=sn,n.useTimeout=function(n,t,u){void 0===u&&(u=[t]);var o=r(n);e.useEffect(function(){var n=setTimeout(function(){return null==o.current?void 0:o.current()},t);return function(){return clearTimeout(n)}},u)},n.useTimeoutCallback=function(n,t){var u=r(n),o=e.useRef();return C(function(){o.current&&(clearTimeout(o.current.handle),o.current.resolve())}),e.useCallback(function(){return new Promise(function(n){o.current&&(clearTimeout(o.current.handle),o.current.resolve());var e=setTimeout(function(){null==u.current||u.current(),n()},t);o.current={handle:e,resolve:n}})},[u,t])},n.useTitle=function(n,t){var r=e.useRef(document.title);e.useEffect(function(){document.title=n},[n]),dn(function(){(null==t?void 0:t.restoreOnUnmount)&&(document.title=r.current)})},n.useToggle=function(n){void 0===n&&(n=!1);var t=e.useState(n),r=t[1];return[t[0],e.useCallback(function(){return r(function(n){return!n})},[]),b(r,null,!0),b(r,null,!1),r]},n.useToggleFullscreen=N,n.useTriggerUpdate=z,n.useUpdatedLink=O,n.useUpdatedRef=r,n.useWillUnmount=dn,n.useWindowBeforeUnload=function(n,e){return void 0===e&&(e=!0),y(window,"beforeunload",function(e){return e.preventDefault(),n&&(e.returnValue=n),n},{enabled:e})},n.useWindowScrollOffset=function(){var n=e.useState(i),t=n[0],r=n[1];return y(window,"scroll",function(){return r(i())},{capture:!1,passive:!0,usingAnimationFrame:!0}),t},n.useWindowSize=function(){var n=e.useState(a),t=n[0],r=n[1];return y(window,"resize",function(){return r(a())}),t},n.useWorkerCallback=function(n,t,r){void 0===r&&(r=P);var u=e.useState(r),o=u[0],c=u[1],i=e.useRef(),a=e.useCallback(function(e,r){i.current&&i.current.terminate();var u=new Worker(n,t);u.addEventListener("message",function(n){return c({loading:!1,result:n.data})}),u.addEventListener("error",function(n){return c({loading:!1,error:n.error})}),u.postMessage(e,r),c(x),i.current=u},[t,n]);return dn(function(){i.current&&i.current.terminate()}),[o,a]}});
//# sourceMappingURL=index.umd.js.map
