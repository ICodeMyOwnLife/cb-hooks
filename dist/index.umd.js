!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("json2mq")):"function"==typeof define&&define.amd?define(["exports","react","json2mq"],e):e((n=n||self).cbHooks={},n.react,n.json2mq)}(this,function(n,e,r){r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var t=function(n,r){var t=e.useRef(n);return e.useLayoutEffect(function(){t.current=n},r),t},u=function(){return{}},o=function(){return"undefined"!=typeof window&&void 0!==window.document},c=function(){return o()?{x:window.scrollX,y:window.scrollY}:{}},i=function(){return o()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{}},a=function(n){return function(n){return n instanceof Object&&n.nativeEvent instanceof Event}(n)&&n.persist()},l=function(n){return function(r,u,o){var c=t(r),i=e.useRef(n(r,u,o));return e.useEffect(function(){return i.current=n(function(){return c.current.apply(c,arguments)},u,o),function(){var n;return null==(n=i.current)?void 0:n.cancel()}},[c,o,u]),e.useCallback(function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach(a),i.current.apply(i,e)},[])}},f=function(n,e){var r,t=null,u=null,o=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return u=c,null===t&&(t=setTimeout(function(){null!==u&&(r=n.apply(void 0,u),u=null),t=null},e)),r};return o.cancel=function(){null!==t&&clearTimeout(t),t=null,u=null},o},s=l(f),v=function(n){return function(r,u,o,c){var i=e.useState(),a=i[0],l=i[1],f=t(r),s=e.useRef(n(r,o,c));return e.useEffect(function(){return s.current=n(function(){var n=f.current.apply(f,arguments);return l(n),n},o,c),function(){var n;return null==(n=s.current)?void 0:n.cancel()}},[f,c,o]),e.useEffect(function(){s.current.apply(s,u)},u),a}},d=v(f),m=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return e.useCallback(function(n){var e=n.target.checked;return r.forEach(function(n){return null==n?void 0:n(Boolean(e))})},r)},g=function(n){var r=e.useRef(n);return{set:function(n){r.current=n},get:function(){return r.current},is:function(n){return r.current===n}}},h=function(n,r){void 0===r&&(r=null);for(var t=arguments.length,u=new Array(t>2?t-2:0),o=2;o<t;o++)u[o-2]=arguments[o];return e.useCallback(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return null==n?void 0:n.apply(r,[].concat(u,t))},[n].concat(u))},p=function(n,e,r){var t,u=void 0===r?{trailing:!0}:r,o=u.leading,c=u.trailing,i=null,a=null,l=function(){for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return i=u,null!==a?clearTimeout(a):o&&(t=n.apply(void 0,i),i=null),a=setTimeout(function(){c&&null!==i&&(t=n.apply(void 0,i),i=null),a=null},e),t};return l.cancel=function(){null!==a&&clearTimeout(a),i=null,a=null},l},y=l(p),b=v(p),w=function(n){return e.useEffect(n,[])},E=function(n){return w(n)},S=function(n,e,r){var t;n&&(!r||(t=e.target)instanceof Object&&"matches"in t&&e.target.matches(r))&&n(e)},k=function(n,r,u,o){var c=void 0===o?{}:o,i=c.capture,a=c.once,l=c.passive,f=c.selectors,s=c.usingAnimationFrame,v=c.enabled,d=void 0===v||v,m=t(u),g=e.useRef(0);e.useEffect(function(){if(d){var e=function(n){return n instanceof Function?n():n}(n);if(e){var t=function(n){s?(cancelAnimationFrame(g.current),g.current=requestAnimationFrame(function(){return S(m.current,n,f)})):S(m.current,n,f)},u=Array.isArray(r)?r:[r];return u.forEach(function(n){return e.addEventListener(n,t,{capture:i,once:a,passive:l})}),function(){s&&g.current&&cancelAnimationFrame(g.current),u.forEach(function(n){return e.removeEventListener(n,t,{capture:i})})}}}},[n,i,a,l,f,s,d].concat(r))},C=function(){return e.useReducer(u,{})},A=function(n,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var u=e.useCallback(function(e){var r;!document.fullscreenElement||!1!==e&&void 0!==e||document.exitFullscreen(),document.fullscreenElement||!0!==e&&void 0!==e||null==(r=n.current)||null==r.requestFullscreen||r.requestFullscreen()},[n]);return k(document,"fullscreenchange",r),k(document,"fullscreenerror",t),u},I=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return e.useCallback(function(n){var e=n.target.value;return r.forEach(function(n){return null==n?void 0:n(Number(e))})},r)},T=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return e.useCallback(function(n){var e=n.target.value;return r.forEach(function(n){return null==n?void 0:n(String(e))})},r)};function R(n,e){try{var r=n()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var O=function(n,r,u,o){void 0===o&&(o=[]);var c=t(r);e.useLayoutEffect(function(){var e=n();if(e&&e.length){var r=new IntersectionObserver(function(n,e){return null==c.current?void 0:c.current(n,e)},u);return e.forEach(function(n){return r.observe(n)}),function(){return r.disconnect()}}},o)},L=function(n){return n instanceof Object},F=function(){var n=e.useRef(!1);return w(function(){return n.current=!0,function(){n.current=!1}}),e.useCallback(function(){return n.current},[])};function j(n,e){if(null==n)return{};var r,t,u={},o=Object.keys(n);for(t=0;t<o.length;t++)e.indexOf(r=o[t])>=0||(u[r]=n[r]);return u}var q=function(n){return n.dataset.src},M={loading:!1},H={loading:!0},W=function(n,r){return function(t,u){void 0===u&&(u=M);var o=F(),c=e.useState(u),i=c[0],a=c[1];return e.useEffect(function(){if(r(t)){var e=t.id&&document.querySelector(n+"#"+t.id)||document.createElement(n);Object.assign(e,t);var u=function(){o()&&a(M)},c=function(n){o()&&a({loading:!1,error:n.error})};return e.addEventListener("load",u,!1),e.addEventListener("error",c,!1),a(H),document.body.appendChild(e),function(){e.removeEventListener("load",u,!1),e.removeEventListener("error",c,!1)}}a(M)},[t,o]),i}},P=W("link",function(n){var e=n.href;return o()&&!!e&&!document.querySelector('link[href="'+e+'"]')}),x=function(n){return e=n,Object.fromEntries(["matches","media"].map(function(n){return[n,e[n]]}));var e},z=function(n,e){var r,t=null,u=setInterval(function(){t&&(r=n.apply(void 0,t),t=null)},e),o=function(){for(var n=arguments.length,e=new Array(n),u=0;u<n;u++)e[u]=arguments[u];return t=e,r};return o.cancel=function(){clearInterval(u),t=null},o},U=l(z),D=v(z),V=W("script",function(n){var e=n.src;return o()&&!!e&&!document.querySelector('script[src="'+e+'"]')}),B=function(n){return null==n?void 0:n.getAttribute("id")},N=function(n,e,r){var t,u=void 0===r?{leading:!0,trailing:!0}:r,o=u.leading,c=u.trailing,i=null,a=null,l=function(){for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return i=u,null===a&&(o&&(t=n.apply(void 0,i),i=null),a=setTimeout(function(){c&&null!==i&&(t=n.apply(void 0,i),i=null),a=null},e)),t};return l.cancel=function(){null!==a&&clearTimeout(a),i=null,a=null},l},Q=l(N),X=v(N),Y=function(n){return w(function(){return n})};n.useAnimationFrame=function(n,r){void 0===r&&(r=[]);var u=t(n);e.useEffect(function(){var n=requestAnimationFrame(function(n){return null==u.current?void 0:u.current(n)});return function(){return cancelAnimationFrame(n)}},r)},n.useAudit=s,n.useAuditValue=d,n.useCallbackWithCleanup=function(n,r){void 0===r&&(r=[]);var u=t(n),o=e.useRef();return e.useCallback(function(){o.current&&o.current();for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];o.current=null==u.current?void 0:u.current.apply(u,e)},r)},n.useCheckInput=function(n){void 0===n&&(n=!1);var r=e.useState(n),t=r[1];return[r[0],t,m(t)]},n.useCurrent=g,n.useCurryFunction=h,n.useDebounce=y,n.useDebounceValue=b,n.useDidMount=E,n.useDidUpdate=function(n,r){var t=e.useRef(!1);e.useEffect(t.current?n:function(){t.current=!0},r)},n.useEffectOnce=w,n.useEvent=k,n.useForceUpdate=function(){return C()[1]},n.useFullscreen=function(n){var r=e.useState(!1),t=r[0],u=r[1],o=A(n,function(){return u(!!document.fullscreenElement&&document.fullscreenElement===n.current)});return[t,o,h(o,null,!0),h(o,null,!1)]},n.useHandleChangeCheck=m,n.useHandleChangeFile=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return e.useCallback(function(n){var e=n.target.files;return r.forEach(function(n){return null==n?void 0:n(e)})},r)},n.useHandleChangeNumber=I,n.useHandleChangeText=T,n.useInfiniteScroll=function(n,r){var t=e.useRef(!1),u="boolean"==typeof(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:void 0,o=L(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:L(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:void 0;O(function(){return n.current&&[n.current]},function(n){try{var e=function(){t.current=!1};if(u||t.current||n.every(function(n){return!n.isIntersecting}))return Promise.resolve();t.current=!0;var o=R(function(){return Promise.resolve(Promise.resolve(r())).then(function(){})},function(){});return Promise.resolve(o&&o.then?o.then(e):e())}catch(n){return Promise.reject(n)}},o)},n.useIntersectionObserver=function(n,e,r){return O(function(){return n.current&&[n.current]},e,r,[r])},n.useIntersectionObserverEffect=O,n.useInterval=function(n,r){var u=r.period,o=r.leading,c=r.running,i=r.deps,a=void 0===i?[u,o,c]:i,l=t(n);e.useEffect(function(){var n;return c&&(o&&(null==l.current||l.current()),n=setInterval(function(){return null==l.current?void 0:l.current()},u)),function(){n&&clearInterval(n)}},a)},n.useIsMounted=F,n.useLazyLoad=function(n){void 0===n&&(n={});var r=n.getSrc,t=void 0===r?q:r,u=j(n,["getSrc"]),o=e.useRef(new Map),c=e.useCallback(function(n){if("string"==typeof n){var e=n;return function(n){o.current.set(n,e)}}if(n instanceof HTMLImageElement){var r=n,u=t(r);u&&o.current.set(r,u)}},[t]);return O(function(){return Array.from(o.current.keys())},function(n,e){return n.forEach(function(n){var r=n.target;if(n.isIntersecting&&r instanceof HTMLImageElement){var u=o.current.get(r)||t(r);u&&(r.src=u),e.unobserve(r)}})},u),c},n.useLink=P,n.useMediaQuery=function(n,t){void 0===t&&(t={media:"",matches:!1});var u="string"==typeof n?n:r(n),c=e.useState(o()?function(){return x(window.matchMedia(u))}:t),i=c[0],a=c[1];return e.useEffect(function(){var n=window.matchMedia(u),e=function(n){a(n)};return a(x(n)),n.addListener(e),function(){return n.removeListener(e)}},[u]),i},n.useMutationObserver=function(n,r,u){var o=t(r);e.useLayoutEffect(function(){if(n.current){var e=new MutationObserver(function(n,e){return null==o.current?void 0:o.current(n,e)});return e.observe(n.current,u),function(){return e.disconnect()}}},[o,n,u])},n.useNumberInput=function(n){void 0===n&&(n=0);var r=e.useState(n),t=r[1];return[r[0],t,I(t)]},n.useOnClickOutside=function(n,e){return k(document,["mousedown","touchstart"],function(r){e&&n.current&&!n.current.contains(r.target)&&e(r)})},n.usePrevious=function(n){var r=e.useRef();return e.useEffect(function(){r.current=n}),r.current},n.usePromise=function(n,r,t){void 0===r&&(r=[]),void 0===t&&(t=M);var u=e.useState(t),o=u[0],c=u[1];return e.useEffect(function(){var e=!1,r=n();if(r)return c(H),r.then(function(n){e||c({loading:!1,result:n})}).catch(function(n){e||c({loading:!1,error:n})}),function(){e=!0};c(M)},r),o},n.usePromiseCallback=function(n,r,t){void 0===r&&(r=[]),void 0===t&&(t=M);var u=F(),o=e.useState(t),c=o[0],i=o[1],a=g();return[c,e.useCallback(function(){var e=n.apply(void 0,arguments);a.set(e),e?(i(H),e.then(function(n){a.is(e)&&u()&&i({loading:!1,result:n})}).catch(function(n){a.is(e)&&u()&&i({loading:!1,error:n})})):i(M)},r)]},n.useResizeObserver=function(n,r){var u=t(r);e.useLayoutEffect(function(){if(n.current){var e=new ResizeObserver(function(n){return null==u.current?void 0:u.current(n)});return e.observe(n.current),function(){return e.disconnect()}}},[u,n])},n.useSample=U,n.useSampleValue=D,n.useScript=V,n.useScrollSpy=function(n){void 0===n&&(n={threshold:1});var r=n.getId,t=void 0===r?B:r,u=j(n,["getId"]),o=e.useState(),c=o[0],i=o[1],a=e.useRef(new Map),l=e.useRef(new Set),f=e.useCallback(function(n){if("string"==typeof n){var e=n;return function(n){a.current.set(n,e)}}if(n instanceof Element){var r=n,u=t(r);u&&a.current.set(r,u)}},[t]);return O(function(){return Array.from(a.current.keys())},function(n){if(n.forEach(function(n){var e=n.target;n.isIntersecting?l.current.add(e):l.current.delete(e)}),l.current.size){var e=Array.from(l.current).reduce(function(n,e){return n.getBoundingClientRect().top<e.getBoundingClientRect().top?n:e}),r=a.current.get(e)||t(e);"string"==typeof r&&i(r)}},u),[c,f]},n.useTextInput=function(n){void 0===n&&(n="");var r=e.useState(n),t=r[1];return[r[0],t,T(t)]},n.useThrottle=Q,n.useThrottleValue=X,n.useTimeout=function(n,r,u){void 0===u&&(u=[r]);var o=t(n);e.useEffect(function(){var n=setTimeout(function(){return null==o.current?void 0:o.current()},r);return function(){return clearTimeout(n)}},u)},n.useTimeoutCallback=function(n,r){var u=t(n),o=e.useRef();return E(function(){o.current&&(clearTimeout(o.current.handle),o.current.resolve())}),e.useCallback(function(){return new Promise(function(n){o.current&&(clearTimeout(o.current.handle),o.current.resolve());var e=setTimeout(function(){null==u.current||u.current(),n()},r);o.current={handle:e,resolve:n}})},[u,r])},n.useToggle=function(n){void 0===n&&(n=!1);var r=e.useState(n),t=r[1];return[r[0],e.useCallback(function(){return t(function(n){return!n})},[]),h(t,null,!0),h(t,null,!1),t]},n.useToggleFullscreen=A,n.useTriggerUpdate=C,n.useUpdatedRef=t,n.useWillUnmount=Y,n.useWindowBeforeUnload=function(n,e){return void 0===e&&(e=!0),k(window,"beforeunload",function(e){return e.preventDefault(),n&&(e.returnValue=n),n},{enabled:e})},n.useWindowScrollOffset=function(){var n=e.useState(c),r=n[0],t=n[1];return k(window,"scroll",function(){return t(c())},{capture:!1,passive:!0,usingAnimationFrame:!0}),r},n.useWindowSize=function(){var n=e.useState(i),r=n[0],t=n[1];return k(window,"resize",function(){return t(i())}),r},n.useWorkerCallback=function(n,r,t){void 0===t&&(t=M);var u=e.useState(t),o=u[0],c=u[1],i=e.useRef(),a=e.useCallback(function(e,t){i.current&&i.current.terminate();var u=new Worker(n,r);u.addEventListener("message",function(n){return c({loading:!1,result:n.data})}),u.addEventListener("error",function(n){return c({loading:!1,error:n.error})}),u.postMessage(e,t),c(H),i.current=u},[r,n]);return Y(function(){i.current&&i.current.terminate()}),[o,a]}});
//# sourceMappingURL=index.umd.js.map
