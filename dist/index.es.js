import{useRef as n,useLayoutEffect as r,useEffect as t,useState as e,useCallback as u,useContext as o,useReducer as c}from"react";import{isBrowser as i,createURLSearchObject as f}from"cb-toolset/dom";import{audit as a,debounce as l,sample as v,throttle as d}from"cb-toolset/function";import{createUniqueObject as s,pickFrom as p}from"cb-toolset/object";var m=function(t,e){var u=n(t);return r(function(){u.current=t},e),u},h=function(n,r,t){var e;n&&(!t||(e=r.target)instanceof Object&&"matches"in e&&r.target.matches(t))&&n(r)},y=function(r,e,u,o){var c=void 0===o?{}:o,i=c.capture,f=c.once,a=c.passive,l=c.selectors,v=c.usingAnimationFrame,d=c.enabled,s=void 0===d||d,p=m(u),y=n(0);t(function(){if(s){var n=function(n){return n instanceof Function?n():n}(r);if(n){var t=function(n){v?(cancelAnimationFrame(y.current),y.current=requestAnimationFrame(function(){return h(p.current,n,l)})):h(p.current,n,l)},u=Array.isArray(e)?e:[e];return u.forEach(function(r){return n.addEventListener(r,t,{capture:i,once:f,passive:a})}),function(){v&&y.current&&cancelAnimationFrame(y.current),u.forEach(function(r){return n.removeEventListener(r,t,{capture:i})})}}}},[r,i,f,a,l,v,s].concat(e))},g=function(n,r){return void 0===r&&(r=!0),y(window,"beforeunload",function(r){return r.preventDefault(),n&&(r.returnValue=n),n},{enabled:r})},b=function(n){return function(r){var e=m(r);t(function(){var r=n.block(function(n,r){return null==e.current?void 0:e.current(n,r)});return function(){return r()}},[e])}},w=function(n){return function(r,t){void 0===r&&(r=!0),b(n)(function(){return r?t||!1:void 0}),g(t,r)}};function E(){return(E=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}function O(n){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function S(n,r){return(S=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(n,r)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function j(n,r,t){return(j=A()?Reflect.construct:function(n,r,t){var e=[null];e.push.apply(e,r);var u=new(Function.bind.apply(n,e));return t&&S(u,t.prototype),u}).apply(null,arguments)}function P(n){var r="function"==typeof Map?new Map:void 0;return(P=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return j(n,arguments,O(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),S(t,n)})(n)}function F(n,r){if(null==n)return{};var t,e,u={},o=Object.keys(n);for(e=0;e<o.length;e++)r.indexOf(t=o[e])>=0||(u[t]=n[t]);return u}var L={loading:!1},I={loading:!0},k=function(n,r,u,o){void 0===r&&(r=[]),void 0===u&&(u=L);var c=e(u),i=c[0],f=c[1];return t(function(){var r=!1,t=n();if(t)return f(I),t.then(function(n){r||f({loading:!1,result:n})}).catch(function(n){r||f({loading:!1,error:n})}),function(){r=!0,null==o||o()};f(L)},r),i},_=function(n){var r,t;function e(r,t){var e;return(e=n.call(this,r||"Fetch Error")||this).status=t,e}return t=n,(r=e).prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t,e}(P(Error)),M=function(r,t){return function(e,u,o,c){var i=n();return k(function(){try{var n=new AbortController;return i.current=n,Promise.resolve(r(e,E({},u,{signal:n.signal}))).then(function(n){var r=!1;function e(t){if(r)return t;throw new _(n.statusText,n.status)}var u=function(){if(n.ok)return Promise.resolve(t(n)).then(function(n){return r=!0,n})}();return u&&u.then?u.then(e):e(u)})}catch(n){return Promise.reject(n)}},o,c,function(){var n;return null==(n=i.current)?void 0:n.abort()})}},x=function(n){return function(r){var e=m(r);t(function(){var r=n.listen(function(n,r){return null==e.current?void 0:e.current(n,r)});return function(){return r()}},[e])}},T=function(){return i()?{x:window.scrollX,y:window.scrollY}:{}},q=function(){return i()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{}},R=function(n){return function(n){return n instanceof Object&&n.nativeEvent instanceof Event}(n)&&n.persist()},H=function(r){return function(e,o,c){var i=m(e),f=n(r(e,o,c));return t(function(){return f.current=r(function(){return i.current.apply(i,arguments)},o,c),function(){var n;return null==(n=f.current)?void 0:n.cancel()}},[i,c,o]),u(function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.forEach(R),f.current.apply(f,r)},[])}},C=function(r){return function(u,o,c,i){var f=e(),a=f[0],l=f[1],v=m(u),d=n(r(u,c,i));return t(function(){return d.current=r(function(){var n=v.current.apply(v,arguments);return l(n),n},c,i),function(){var n;return null==(n=d.current)?void 0:n.cancel()}},[v,i,c]),t(function(){d.current.apply(d,o)},o),a}},W=function(n){return t(n,[])},B=function(){var r=n(!1);return W(function(){return r.current=!0,function(){r.current=!1}}),u(function(){return r.current},[])},D=function(n,r,u){return function(o,c){void 0===c&&(c=L);var i=B(),f=e(c),a=f[0],l=f[1];return t(function(){if(r(o)){var t=o.id&&document.querySelector(n+"#"+o.id)||document.createElement(n);Object.assign(t,o);var e=function(){i()&&l(L)},c=function(n){i()&&l({loading:!1,error:n.error})};return t.addEventListener("load",e,!1),t.addEventListener("error",c,!1),l(I),u(t),function(){t.removeEventListener("load",e,!1),t.removeEventListener("error",c,!1)}}l(L)},[o,i]),a}},z=function(n){return function(){var r=o(n).location.search;return f(r)}},N=function(n,r){void 0===r&&(r=[]);var e=m(n);t(function(){var n=requestAnimationFrame(function(n){return null==e.current?void 0:e.current(n)});return function(){return cancelAnimationFrame(n)}},r)},U=function(n,r){switch(r.type){case"append":return[].concat(n,[r.payload]);case"prepend":return[r.payload].concat(n);case"filter":return n.filter(r.payload);default:return n}},V=function(n){void 0===n&&(n=[]);var r=c(U,n),t=r[1];return[r[0],u(function(n){return t({type:"append",payload:n})},[t]),u(function(n){return t({type:"prepend",payload:n})},[t]),u(function(n){return t({type:"filter",payload:n})},[t])]},X=H(a),Y=C(a),G=function(r,t){void 0===t&&(t=[]);var e=m(r),o=n();return u(function(){o.current&&o.current();for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];o.current=null==e.current?void 0:e.current.apply(e,r)},t)},J=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.checked;return r.forEach(function(n){return null==n?void 0:n(Boolean(t))})},r)},K=function(n){void 0===n&&(n=!1);var r=e(n),t=r[1];return[r[0],t,J(t)]},Q=function(r){var t=n(r);return{set:function(n){t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},Z=function(n,r){void 0===r&&(r=null);for(var t=arguments.length,e=new Array(t>2?t-2:0),o=2;o<t;o++)e[o-2]=arguments[o];return u(function(){for(var t=arguments.length,u=new Array(t),o=0;o<t;o++)u[o]=arguments[o];return null==n?void 0:n.apply(r,[].concat(e,u))},[n].concat(e))},$=H(l),nn=C(l),rn=function(n){return W(n)},tn=function(r,e){var u=n(!1);t(u.current?r:function(){u.current=!0},e)},en=function(n,r,e){void 0===e&&(e=[]);var u=m(r);t(function(){var r=u.current,t=("function"==typeof r?r():document.querySelector(r))||document.createElement("link");t instanceof HTMLLinkElement&&(Object.assign(t,n),document.head.appendChild(t))},e)},un=function(n){return en({href:n,rel:"shortcut icon",type:"image/x-icon"},"link[rel='shortcut icon']",[n])},on=M(fetch,function(n){return n.json()}),cn=M(fetch,function(n){return n.arrayBuffer()}),fn=M(fetch,function(n){return n.blob()}),an=M(fetch,function(n){return n.formData()}),ln=M(fetch,function(n){return Promise.resolve(n.body)}),vn=M(fetch,function(n){return n.text()}),dn=function(){return c(s,s())},sn=function(){return dn()[1]},pn=function(n,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var e=u(function(r){var t;!document.fullscreenElement||!1!==r&&void 0!==r||document.exitFullscreen(),document.fullscreenElement||!0!==r&&void 0!==r||null==(t=n.current)||null==t.requestFullscreen||t.requestFullscreen()},[n]);return y(document,"fullscreenchange",r),y(document,"fullscreenerror",t),e},mn=function(n){var r=e(!1),t=r[0],u=r[1],o=pn(n,function(){return u(!!document.fullscreenElement&&document.fullscreenElement===n.current)});return[t,o,Z(o,null,!0),Z(o,null,!1)]},hn=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.files;return r.forEach(function(n){return null==n?void 0:n(t)})},r)},yn=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.value;return r.forEach(function(n){return null==n?void 0:n(Number(t))})},r)},gn=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.value;return r.forEach(function(n){return null==n?void 0:n(String(t))})},r)};function bn(n,r){try{var t=n()}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var wn=function(n,t,e,u){void 0===u&&(u=[]);var o=m(t);r(function(){var r=n();if(r&&r.length){var t=new IntersectionObserver(function(n,r){return null==o.current?void 0:o.current(n,r)},e);return r.forEach(function(n){return t.observe(n)}),function(){return t.disconnect()}}},u)},En=function(n){return n instanceof Object},On=function(r,t){var e=n(!1),u="boolean"==typeof(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:void 0,o=En(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:En(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:void 0;wn(function(){return r.current&&[r.current]},function(n){try{var r=function(){e.current=!1};if(u||e.current||n.every(function(n){return!n.isIntersecting}))return Promise.resolve();e.current=!0;var o=bn(function(){return Promise.resolve(Promise.resolve(t())).then(function(){})},function(){});return Promise.resolve(o&&o.then?o.then(r):r())}catch(n){return Promise.reject(n)}},o)},Sn=function(n,r,t){return wn(function(){return n.current&&[n.current]},r,t,[t])},An=function(n,r){var e=r.period,u=r.leading,o=r.running,c=r.deps,i=void 0===c?[e,u,o]:c,f=m(n);t(function(){var n;return o&&(u&&(null==f.current||f.current()),n=setInterval(function(){return null==f.current?void 0:f.current()},e)),function(){n&&clearInterval(n)}},i)},jn=function(n){return n.dataset.src},Pn=function(r){var t=void 0===r?{}:r,e=t.getSrc,o=void 0===e?jn:e,c=F(t,["getSrc"]),i=n(new Map),f=u(function(n){if("string"==typeof n){var r=n;return function(n){i.current.set(n,r)}}if(n instanceof HTMLImageElement){var t=n,e=o(t);e&&i.current.set(t,e)}},[o]);return wn(function(){return Array.from(i.current.keys())},function(n,r){return n.forEach(function(n){var t=n.target;if(n.isIntersecting&&t instanceof HTMLImageElement){var e=i.current.get(t)||o(t);e&&(t.src=e),r.unobserve(t)}})},c),f},Fn=D("link",function(n){var r=n.href;return i()&&!!r&&!document.querySelector('link[href="'+r+'"]')},function(n){return document.head.appendChild(n)}),Ln=function(n){return p(n,"matches","media")},In=function(n,r){void 0===r&&(r={media:"",matches:!1});var u=e(i()?function(){return Ln(window.matchMedia(n))}:r),o=u[0],c=u[1];return t(function(){var r=window.matchMedia(n),t=function(n){c(n)};return c(Ln(r)),r.addListener(t),function(){return r.removeListener(t)}},[n]),o},kn=function(n,t,e){var u=m(t);r(function(){if(n.current){var r=new MutationObserver(function(n,r){return null==u.current?void 0:u.current(n,r)});return r.observe(n.current,e),function(){return r.disconnect()}}},[u,n,e])},_n=function(n){void 0===n&&(n=0);var r=e(n),t=r[1];return[r[0],t,yn(t)]},Mn=function(n,r){return y(document,["mousedown","touchstart"],function(t){r&&n.current&&!n.current.contains(t.target)&&r(t)})},xn=function(n){return y(document,"visibilitychange",function(){return null==n?void 0:n(document.visibilityState)})},Tn=function(){var n=e(document.visibilityState),r=n[0];return xn(n[1]),r},qn=function(){return!0},Rn=function(r,e){void 0===e&&(e=qn);var u=n();return t(function(){e(r)&&(u.current=r)},[r]),u.current},Hn=function(n,r,t){void 0===r&&(r=[]),void 0===t&&(t=L);var o=B(),c=e(t),i=c[0],f=c[1],a=Q();return[i,u(function(){var r=n.apply(void 0,arguments);a.set(r),r?(f(I),r.then(function(n){a.is(r)&&o()&&f({loading:!1,result:n})}).catch(function(n){a.is(r)&&o()&&f({loading:!1,error:n})})):f(L)},r)]},Cn=function(n,t){var e=m(t);r(function(){if(n.current){var r=new ResizeObserver(function(n){return null==e.current?void 0:e.current(n)});return r.observe(n.current),function(){return r.disconnect()}}},[e,n])},Wn=H(v),Bn=C(v),Dn=D("script",function(n){var r=n.src;return i()&&!!r&&!document.querySelector('script[src="'+r+'"]')},function(n){return document.body.appendChild(n)}),zn=function(n){return null==n?void 0:n.getAttribute("id")},Nn=function(r){var t=void 0===r?{threshold:1}:r,o=t.getId,c=void 0===o?zn:o,i=F(t,["getId"]),f=e(),a=f[0],l=f[1],v=n(new Map),d=n(new Set),s=u(function(n){if("string"==typeof n){var r=n;return function(n){v.current.set(n,r)}}if(n instanceof Element){var t=n,e=c(t);e&&v.current.set(t,e)}},[c]);return wn(function(){return Array.from(v.current.keys())},function(n){if(n.forEach(function(n){var r=n.target;n.isIntersecting?d.current.add(r):d.current.delete(r)}),d.current.size){var r=Array.from(d.current).reduce(function(n,r){return n.getBoundingClientRect().top<r.getBoundingClientRect().top?n:r}),t=v.current.get(r)||c(r);"string"==typeof t&&l(t)}},i),[a,s]},Un=function(n){void 0===n&&(n="");var r=e(n),t=r[1];return[r[0],t,gn(t)]},Vn=H(d),Xn=C(d),Yn=function(){return!0},Gn=function(r,e,u){void 0===e&&(e=!0),void 0===u&&(u=Yn);var o=n([]);return t(function(){u(r)&&(o.current=e?[r].concat(o.current):[].concat(o.current,[r]))},[r]),o.current},Jn=function(n,r,e){void 0===e&&(e=[r]);var u=m(n);t(function(){var n=setTimeout(function(){return null==u.current?void 0:u.current()},r);return function(){return clearTimeout(n)}},e)},Kn=function(r,t){var e=m(r),o=n();return rn(function(){o.current&&(clearTimeout(o.current.handle),o.current.resolve())}),u(function(){return new Promise(function(n){o.current&&(clearTimeout(o.current.handle),o.current.resolve());var r=setTimeout(function(){null==e.current||e.current(),n()},t);o.current={handle:r,resolve:n}})},[e,t])},Qn=function(n){return W(function(){return n})},Zn=function(r,e){var u=n(document.title);t(function(){document.title=r},[r]),Qn(function(){(null==e?void 0:e.restoreOnUnmount)&&(document.title=u.current)})},$n=function(n){void 0===n&&(n=!1);var r=e(n),t=r[1];return[r[0],u(function(){return t(function(n){return!n})},[]),Z(t,null,!0),Z(t,null,!1),t]},nr=function(){var n=e(T),r=n[0],t=n[1];return y(window,"scroll",function(){return t(T())},{capture:!1,passive:!0,usingAnimationFrame:!0}),r},rr=function(){var n=e(q),r=n[0],t=n[1];return y(window,"resize",function(){return t(q())}),r},tr=function(r,t,o){void 0===o&&(o=L);var c=e(o),i=c[0],f=c[1],a=n(),l=u(function(n,e){a.current&&a.current.terminate();var u=new Worker(r,t);u.addEventListener("message",function(n){return f({loading:!1,result:n.data})}),u.addEventListener("error",function(n){return f({loading:!1,error:n.error})}),u.postMessage(n,e),f(I),a.current=u},[t,r]);return Qn(function(){a.current&&a.current.terminate()}),[i,l]};export{w as createBeforeLeaveHook,M as createFetchHook,b as createHistoryBlockHook,x as createHistoryListenHook,H as createRateLimitHook,C as createRateLimitValueHook,D as createResourceHook,z as createSearchParamsObjectHook,N as useAnimationFrame,V as useArray,X as useAudit,Y as useAuditValue,G as useCallbackWithCleanup,K as useCheckInput,Q as useCurrent,Z as useCurryFunction,$ as useDebounce,nn as useDebounceValue,rn as useDidMount,tn as useDidUpdate,W as useEffectOnce,y as useEvent,un as useFavicon,on as useFetch,cn as useFetchArrayBuffer,fn as useFetchBlob,an as useFetchFormData,ln as useFetchStream,vn as useFetchText,sn as useForceUpdate,mn as useFullscreen,J as useHandleChangeCheck,hn as useHandleChangeFile,yn as useHandleChangeNumber,gn as useHandleChangeText,On as useInfiniteScroll,Sn as useIntersectionObserver,wn as useIntersectionObserverEffect,An as useInterval,B as useIsMounted,Pn as useLazyLoad,Fn as useLink,In as useMediaQuery,kn as useMutationObserver,_n as useNumberInput,Mn as useOnClickOutside,xn as usePageVisibility,Tn as usePageVisibilityState,Rn as usePrevious,k as usePromise,Hn as usePromiseCallback,Cn as useResizeObserver,Wn as useSample,Bn as useSampleValue,Dn as useScript,Nn as useScrollSpy,Un as useTextInput,Vn as useThrottle,Xn as useThrottleValue,Gn as useTimeline,Jn as useTimeout,Kn as useTimeoutCallback,Zn as useTitle,$n as useToggle,pn as useToggleFullscreen,dn as useTriggerUpdate,en as useUpdatedLink,m as useUpdatedRef,Qn as useWillUnmount,g as useWindowBeforeUnload,nr as useWindowScrollOffset,rr as useWindowSize,tr as useWorkerCallback};
//# sourceMappingURL=index.es.js.map
