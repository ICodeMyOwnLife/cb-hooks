import{useRef as n,useLayoutEffect as r,useEffect as t,useState as e,useCallback as u,useContext as o,useReducer as c}from"react";import{isBrowser as i,createURLSearchObject as f}from"cb-toolset/dom";import{audit as a,debounce as l,getValueFromFactory as v,sample as s,throttle as d}from"cb-toolset/function";import{createUniqueObject as p,pickFrom as m}from"cb-toolset/object";var h=function(t,e){var u=n(t);return r(function(){u.current=t},e),u},y=function(n,r,t){var e;n&&(!t||(e=r.target)instanceof Object&&"matches"in e&&r.target.matches(t))&&n(r)},g=function(r,e,u,o){var c=void 0===o?{}:o,i=c.capture,f=c.once,a=c.passive,l=c.selectors,v=c.usingAnimationFrame,s=c.enabled,d=void 0===s||s,p=h(u),m=n(0);t(function(){if(d){var n=function(n){return n instanceof Function?n():n}(r);if(n){var t=function(n){v?(cancelAnimationFrame(m.current),m.current=requestAnimationFrame(function(){return y(p.current,n,l)})):y(p.current,n,l)},u=Array.isArray(e)?e:[e];return u.forEach(function(r){return n.addEventListener(r,t,{capture:i,once:f,passive:a})}),function(){v&&m.current&&cancelAnimationFrame(m.current),u.forEach(function(r){return n.removeEventListener(r,t,{capture:i})})}}}},[r,i,f,a,l,v,d].concat(e))},b=function(n,r){return void 0===r&&(r=!0),g(window,"beforeunload",function(r){return r.preventDefault(),n&&(r.returnValue=n),n},{enabled:r})},w=function(n){return function(r){var e=h(r);t(function(){var r=n.block(function(n,r){return null==e.current?void 0:e.current(n,r)});return function(){return r()}},[e])}},E=function(n){return function(r,t){void 0===r&&(r=!0),w(n)(function(){return r?t||!1:void 0}),b(t,r)}};function O(){return(O=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}function j(n){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function P(n,r){return(P=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(n,r)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function F(n,r,t){return(F=A()?Reflect.construct:function(n,r,t){var e=[null];e.push.apply(e,r);var u=new(Function.bind.apply(n,e));return t&&P(u,t.prototype),u}).apply(null,arguments)}function L(n){var r="function"==typeof Map?new Map:void 0;return(L=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return F(n,arguments,j(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),P(t,n)})(n)}function S(n,r){if(null==n)return{};var t,e,u={},o=Object.keys(n);for(e=0;e<o.length;e++)r.indexOf(t=o[e])>=0||(u[t]=n[t]);return u}var k={loading:!1},_={loading:!0},M=function(n,r,u,o){void 0===r&&(r=[]),void 0===u&&(u=k);var c=e(u),i=c[0],f=c[1];return t(function(){var r=!1,t=n();if(t)return f(_),t.then(function(n){r||f({loading:!1,result:n})}).catch(function(n){r||f({loading:!1,error:n})}),function(){r=!0,null==o||o()};f(k)},r),i},x=function(n){var r,t;function e(r,t){var e;return(e=n.call(this,r||"Fetch Error")||this).status=t,e}return t=n,(r=e).prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t,e}(L(Error)),T=function(r,t){return function(e,u,o,c){var i=n();return M(function(){try{var n=new AbortController;return i.current=n,Promise.resolve(r(e,O(O({},u),{},{signal:n.signal}))).then(function(n){var r;function e(t){if(r)return t;throw new x(n.statusText,n.status)}var u=function(){if(n.ok)return Promise.resolve(t(n)).then(function(n){return r=1,n})}();return u&&u.then?u.then(e):e(u)})}catch(n){return Promise.reject(n)}},o,c,function(){var n;return null==(n=i.current)?void 0:n.abort()})}},q=function(n){return function(r){var e=h(r);t(function(){var r=n.listen(function(n,r){return null==e.current?void 0:e.current(n,r)});return function(){return r()}},[e])}},I=function(){return i()?{x:window.scrollX,y:window.scrollY}:{}},R=function(){return i()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{}},H=function(n){return function(n){return n instanceof Object&&n.nativeEvent instanceof Event}(n)&&n.persist()},C=function(r){return function(e,o,c){var i=h(e),f=n(r(e,o,c));return t(function(){return f.current=r(function(){return i.current.apply(i,[].slice.call(arguments))},o,c),function(){var n;return null==(n=f.current)?void 0:n.cancel()}},[i,c,o]),u(function(){var n=[].slice.call(arguments);return n.forEach(H),f.current.apply(f,n)},[])}},W=function(r){return function(u,o,c,i){var f=e(),a=f[0],l=f[1],v=h(u),s=n(r(u,c,i));return t(function(){return s.current=r(function(){var n=v.current.apply(v,[].slice.call(arguments));return l(n),n},c,i),function(){var n;return null==(n=s.current)?void 0:n.cancel()}},[v,i,c]),t(function(){s.current.apply(s,o)},o),a}},B=function(n,r,u){return function(o,c,i,f){void 0===f&&(f=k);var a=e(f),l=a[0],v=a[1],s=h(c),d=h(i);return t(function(){if(r(o)){var t=o.id&&document.querySelector(n+"#"+o.id)||document.createElement(n);Object.assign(t,o);var e=function(n){v(k),null==s.current||s.current(n)},c=function(n){v({loading:!1,error:n.error}),null==d.current||d.current(n)};return t.addEventListener("load",e,!1),t.addEventListener("error",c,!1),v(_),u(t),function(){t.removeEventListener("load",e,!1),t.removeEventListener("error",c,!1)}}v(k)},[]),l}},D=function(n){return function(){var r=o(n).location.search;return f(r)}},z=function(n,r){void 0===r&&(r=[]);var e=h(n);t(function(){var n=requestAnimationFrame(function(n){return null==e.current?void 0:e.current(n)});return function(){return cancelAnimationFrame(n)}},r)},N=function(n,r){switch(r.type){case"append":return[].concat(n,[r.payload]);case"prepend":return[r.payload].concat(n);case"filter":return n.filter(r.payload);default:return n}},U=function(n){void 0===n&&(n=[]);var r=c(N,n),t=r[1];return[r[0],u(function(n){return t({type:"append",payload:n})},[t]),u(function(n){return t({type:"prepend",payload:n})},[t]),u(function(n){return t({type:"filter",payload:n})},[t])]},V=C(a),X=W(a),Y=function(n,r){return void 0===r&&(r=[]),t(function(){var r=function(n,r){var t=r.href,e=r.target,u={href:n.href,target:n.target};return t&&(n.href=t),e&&(n.target=e),u},t=document.querySelector("base");if(t){var e=t,u=r(e,n);return function(){return r(e,u)}}var o=document.createElement("base");return r(o,n),document.head.insertAdjacentElement("afterbegin",o),function(){return o.remove()}},r)},G=function(r,t){void 0===t&&(t=[]);var e=h(r),o=n();return u(function(){o.current&&o.current(),o.current=null==e.current?void 0:e.current.apply(e,[].slice.call(arguments))},t)},J=function(){var n=[].slice.call(arguments);return u(function(r){var t=r.target.checked;return n.forEach(function(n){return null==n?void 0:n(Boolean(t))})},n)},K=function(n){void 0===n&&(n=!1);var r=e(n),t=r[1];return[r[0],t,J(t)]},Q=function(r){var t=n(r);return{set:function(n){t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},Z=function(n,r){void 0===r&&(r=null);var t=[].slice.call(arguments,2);return u(function(){return null==n?void 0:n.apply(r,[].concat(t,[].slice.call(arguments)))},[n].concat(t))},$=C(l),nn=W(l),rn=function(n){return t(n,[])},tn=function(n){return rn(n)},en=function(r,e){var u=n(!1);t(u.current?r:function(){u.current=!0},e)},un=function(n,r,e){void 0===e&&(e=[]);var u=h(r);t(function(){var r=u.current,t=("function"==typeof r?r():document.querySelector(r))||document.createElement("link");t instanceof HTMLLinkElement&&(Object.assign(t,n),document.head.appendChild(t))},e)},on=function(n){return un({href:n,rel:"shortcut icon",type:"image/x-icon"},"link[rel='shortcut icon']",[n])},cn=T(fetch,function(n){return n.json()}),fn=T(fetch,function(n){return n.arrayBuffer()}),an=T(fetch,function(n){return n.blob()}),ln=T(fetch,function(n){return n.formData()}),vn=T(fetch,function(n){return Promise.resolve(n.body)}),sn=T(fetch,function(n){return n.text()}),dn=function(){return c(p,p())},pn=function(){return dn()[1]},mn=function(n,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var e=u(function(r){var t;!document.fullscreenElement||!1!==r&&void 0!==r||document.exitFullscreen(),document.fullscreenElement||!0!==r&&void 0!==r||null==(t=n.current)||null==t.requestFullscreen||t.requestFullscreen()},[n]);return g(document,"fullscreenchange",r),g(document,"fullscreenerror",t),e},hn=function(n){var r=e(!1),t=r[0],u=r[1],o=mn(n,function(){return u(!!document.fullscreenElement&&document.fullscreenElement===n.current)});return[t,o,Z(o,null,!0),Z(o,null,!1)]},yn=function(){var n=[].slice.call(arguments);return u(function(r){var t=r.target.files;return n.forEach(function(n){return null==n?void 0:n(t)})},n)},gn=function(){var n=[].slice.call(arguments);return u(function(r){var t=r.target.value;return n.forEach(function(n){return null==n?void 0:n(Number(t))})},n)},bn=function(){var n=[].slice.call(arguments);return u(function(r){var t=r.target.value;return n.forEach(function(n){return null==n?void 0:n(String(t))})},n)},wn=function(n,t,e,u){void 0===u&&(u=[]);var o=h(t);r(function(){var r=n();if(r&&r.length){var t=e&&O(O({},e),{},{root:v(e.root)}),u=new IntersectionObserver(function(n,r){return null==o.current?void 0:o.current(n,r)},t);return r.forEach(function(n){return u.observe(n)}),function(){return u.disconnect()}}},u)};function En(n,r){try{var t=n()}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}var On=function(n){return n instanceof Object},jn=function(r,t){var e=[].slice.call(arguments,2),u=n(!1),o="boolean"==typeof e[0]?e[0]:void 0,c=On(e[0])?e[0]:On(e[1])?e[1]:void 0;wn(function(){return r.current&&[r.current]},function(n){try{var r=function(){u.current=!1};if(o||u.current||n.every(function(n){return!n.isIntersecting}))return Promise.resolve();u.current=!0;var e=En(function(){return Promise.resolve(Promise.resolve(t())).then(function(){})},function(){});return Promise.resolve(e&&e.then?e.then(r):r())}catch(n){return Promise.reject(n)}},c)},Pn=function(n,r,t){return wn(function(){return n.current&&[n.current]},r,t,[t])},An=function(n,r){var e=r.period,u=r.leading,o=r.running,c=r.deps,i=void 0===c?[e,u,o]:c,f=h(n);t(function(){var n;return o&&(u&&(null==f.current||f.current()),n=setInterval(function(){return null==f.current?void 0:f.current()},e)),function(){n&&clearInterval(n)}},i)},Fn=function(){var r=n(!1);return rn(function(){return r.current=!0,function(){r.current=!1}}),u(function(){return r.current},[])},Ln=function(n){return n.dataset.src},Sn=function(r){var t=void 0===r?{}:r,e=t.getSrc,o=void 0===e?Ln:e,c=S(t,["getSrc"]),i=n(new Map),f=u(function(n){if("string"==typeof n){var r=n;return function(n){i.current.set(n,r)}}if(n instanceof HTMLImageElement){var t=n,e=o(t);e&&i.current.set(t,e)}},[o]);return wn(function(){return Array.from(i.current.keys())},function(n,r){return n.forEach(function(n){var t=n.target;if(n.isIntersecting&&t instanceof HTMLImageElement){var e=i.current.get(t)||o(t);e&&(t.src=e),r.unobserve(t)}})},c),f},kn=B("link",function(n){var r=n.href;return i()&&!!r&&!document.querySelector('link[href="'+r+'"]')},function(n){return document.head.appendChild(n)}),_n=function(n){return m(n,"matches","media")},Mn=function(n,r){void 0===r&&(r={media:"",matches:!1});var u=e(i()?function(){return _n(window.matchMedia(n))}:r),o=u[0],c=u[1];return t(function(){var r=window.matchMedia(n),t=function(n){c(n)};return c(_n(r)),r.addListener(t),function(){return r.removeListener(t)}},[n]),o},xn=function(n,t,e){var u=h(t);r(function(){if(n.current){var r=new MutationObserver(function(n,r){return null==u.current?void 0:u.current(n,r)});return r.observe(n.current,e),function(){return r.disconnect()}}},[u,n,e])},Tn=function(n){void 0===n&&(n=0);var r=e(n),t=r[1];return[r[0],t,gn(t)]},qn=function(n,r){return g(document,["mousedown","touchstart"],function(t){r&&n.current&&!n.current.contains(t.target)&&r(t)})},In=function(n){return g(document,"visibilitychange",function(){return null==n?void 0:n(document.visibilityState)})},Rn=function(){var n=e(document.visibilityState),r=n[0];return In(n[1]),r},Hn=function(){return!0},Cn=function(r,e){void 0===e&&(e=Hn);var u=n();return t(function(){e(r)&&(u.current=r)},[r]),u.current},Wn=function(n,r,t){void 0===r&&(r=[]),void 0===t&&(t=k);var o=Fn(),c=e(t),i=c[0],f=c[1],a=Q();return[i,u(function(){var r=n.apply(void 0,[].slice.call(arguments));a.set(r),r?(f(_),r.then(function(n){a.is(r)&&o()&&f({loading:!1,result:n})}).catch(function(n){a.is(r)&&o()&&f({loading:!1,error:n})})):f(k)},r)]},Bn=function(n,t){var e=h(t);r(function(){if(n.current){var r=new ResizeObserver(function(n){return null==e.current?void 0:e.current(n)});return r.observe(n.current),function(){return r.disconnect()}}},[e,n])},Dn=C(s),zn=W(s),Nn=B("script",function(n){var r=n.src;return i()&&!!r&&!document.querySelector('script[src="'+r+'"]')},function(n){return document.body.appendChild(n)}),Un=function(n){return null==n?void 0:n.getAttribute("id")},Vn=function(r){var t=void 0===r?{}:r,o=t.getId,c=void 0===o?Un:o,i=t.threshold,f=void 0===i?1:i,a=S(t,["getId","threshold"]),l=e(),v=l[0],s=l[1],d=n(new Map),p=n(new Set),m=u(function(n){if("string"==typeof n){var r=n;return function(n){d.current.set(n,r)}}if(n instanceof Element){var t=n,e=c(t);e&&d.current.set(t,e)}},[c]);return wn(function(){return Array.from(d.current.keys())},function(n){if(n.forEach(function(n){var r=n.target;n.intersectionRatio>=f?p.current.add(r):p.current.delete(r)}),p.current.size){var r=Array.from(p.current).reduce(function(n,r){return n.getBoundingClientRect().top<r.getBoundingClientRect().top?n:r}),t=d.current.get(r)||c(r);"string"==typeof t&&s(t)}},O(O({},a),{},{threshold:f})),[v,m]},Xn=function(n){void 0===n&&(n="");var r=e(n),t=r[1];return[r[0],t,bn(t)]},Yn=C(d),Gn=W(d),Jn=function(){return!0},Kn=function(r,e,u){void 0===e&&(e=!0),void 0===u&&(u=Jn);var o=n([]);return t(function(){u(r)&&(o.current=e?[r].concat(o.current):[].concat(o.current,[r]))},[r]),o.current},Qn=function(n,r,e){void 0===e&&(e=[r]);var u=h(n);t(function(){var n=setTimeout(function(){return null==u.current?void 0:u.current()},r);return function(){return clearTimeout(n)}},e)},Zn=function(r,t){var e=h(r),o=n();return tn(function(){o.current&&(clearTimeout(o.current.handle),o.current.resolve())}),u(function(){return new Promise(function(n){o.current&&(clearTimeout(o.current.handle),o.current.resolve());var r=setTimeout(function(){null==e.current||e.current(),n()},t);o.current={handle:r,resolve:n}})},[e,t])},$n=function(n){return rn(function(){return n})},nr=function(r,e){var u=n(document.title);t(function(){document.title=r},[r]),$n(function(){(null==e?void 0:e.restoreOnUnmount)&&(document.title=u.current)})},rr=function(n){void 0===n&&(n=!1);var r=e(n),t=r[1];return[r[0],u(function(){return t(function(n){return!n})},[]),Z(t,null,!0),Z(t,null,!1),t]},tr=function(){var n=e(I),r=n[0],t=n[1];return g(window,"scroll",function(){return t(I())},{capture:!1,passive:!0,usingAnimationFrame:!0}),r},er=function(){var n=e(R),r=n[0],t=n[1];return g(window,"resize",function(){return t(R())}),r},ur=function(r,t,o){void 0===o&&(o=k);var c=e(o),i=c[0],f=c[1],a=n(),l=u(function(n,e){a.current&&a.current.terminate();var u=new Worker(r,t);u.addEventListener("message",function(n){return f({loading:!1,result:n.data})}),u.addEventListener("error",function(n){return f({loading:!1,error:n.error})}),u.postMessage(n,e),f(_),a.current=u},[t,r]);return $n(function(){a.current&&a.current.terminate()}),[i,l]};export{E as createBeforeLeaveHook,T as createFetchHook,w as createHistoryBlockHook,q as createHistoryListenHook,C as createRateLimitHook,W as createRateLimitValueHook,B as createResourceHook,D as createSearchParamsObjectHook,z as useAnimationFrame,U as useArray,V as useAudit,X as useAuditValue,Y as useBase,G as useCallbackWithCleanup,K as useCheckInput,Q as useCurrent,Z as useCurryFunction,$ as useDebounce,nn as useDebounceValue,tn as useDidMount,en as useDidUpdate,rn as useEffectOnce,g as useEvent,on as useFavicon,cn as useFetch,fn as useFetchArrayBuffer,an as useFetchBlob,ln as useFetchFormData,vn as useFetchStream,sn as useFetchText,pn as useForceUpdate,hn as useFullscreen,J as useHandleChangeCheck,yn as useHandleChangeFile,gn as useHandleChangeNumber,bn as useHandleChangeText,jn as useInfiniteScroll,Pn as useIntersectionObserver,wn as useIntersectionObserverEffect,An as useInterval,Fn as useIsMounted,Sn as useLazyLoad,kn as useLink,Mn as useMediaQuery,xn as useMutationObserver,Tn as useNumberInput,qn as useOnClickOutside,In as usePageVisibility,Rn as usePageVisibilityState,Cn as usePrevious,M as usePromise,Wn as usePromiseCallback,Bn as useResizeObserver,Dn as useSample,zn as useSampleValue,Nn as useScript,Vn as useScrollSpy,Xn as useTextInput,Yn as useThrottle,Gn as useThrottleValue,Kn as useTimeline,Qn as useTimeout,Zn as useTimeoutCallback,nr as useTitle,rr as useToggle,mn as useToggleFullscreen,dn as useTriggerUpdate,un as useUpdatedLink,h as useUpdatedRef,$n as useWillUnmount,b as useWindowBeforeUnload,tr as useWindowScrollOffset,er as useWindowSize,ur as useWorkerCallback};
//# sourceMappingURL=index.es.js.map
