import{useRef as n,useLayoutEffect as r,useEffect as t,useState as e,useCallback as u,useContext as o,useReducer as c}from"react";import{isBrowser as i,createURLSearchObject as f}from"cb-toolset/dom";import{audit as a,debounce as l,getValueFromFactory as v,sample as d,throttle as s}from"cb-toolset/function";import{createUniqueObject as m,pickFrom as p}from"cb-toolset/object";var h=function(t,e){var u=n(t);return r(function(){u.current=t},e),u},y=function(n,r,t){var e;n&&(!t||(e=r.target)instanceof Object&&"matches"in e&&r.target.matches(t))&&n(r)},g=function(r,e,u,o){var c=void 0===o?{}:o,i=c.capture,f=c.once,a=c.passive,l=c.selectors,v=c.usingAnimationFrame,d=c.enabled,s=void 0===d||d,m=h(u),p=n(0);t(function(){if(s){var n=function(n){return n instanceof Function?n():n}(r);if(n){var t=function(n){v?(cancelAnimationFrame(p.current),p.current=requestAnimationFrame(function(){return y(m.current,n,l)})):y(m.current,n,l)},u=Array.isArray(e)?e:[e];return u.forEach(function(r){return n.addEventListener(r,t,{capture:i,once:f,passive:a})}),function(){v&&p.current&&cancelAnimationFrame(p.current),u.forEach(function(r){return n.removeEventListener(r,t,{capture:i})})}}}},[r,i,f,a,l,v,s].concat(e))},b=function(n,r){return void 0===r&&(r=!0),g(window,"beforeunload",function(r){return r.preventDefault(),n&&(r.returnValue=n),n},{enabled:r})},w=function(n){return function(r){var e=h(r);t(function(){var r=n.block(function(n,r){return null==e.current?void 0:e.current(n,r)});return function(){return r()}},[e])}},E=function(n){return function(r,t){void 0===r&&(r=!0),w(n)(function(){return r?t||!1:void 0}),b(t,r)}};function O(){return(O=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}function S(n){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function A(n,r){return(A=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(n,r)}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function P(n,r,t){return(P=j()?Reflect.construct:function(n,r,t){var e=[null];e.push.apply(e,r);var u=new(Function.bind.apply(n,e));return t&&A(u,t.prototype),u}).apply(null,arguments)}function F(n){var r="function"==typeof Map?new Map:void 0;return(F=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return P(n,arguments,S(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),A(t,n)})(n)}function L(n,r){if(null==n)return{};var t,e,u={},o=Object.keys(n);for(e=0;e<o.length;e++)r.indexOf(t=o[e])>=0||(u[t]=n[t]);return u}var k={loading:!1},I={loading:!0},_=function(n,r,u,o){void 0===r&&(r=[]),void 0===u&&(u=k);var c=e(u),i=c[0],f=c[1];return t(function(){var r=!1,t=n();if(t)return f(I),t.then(function(n){r||f({loading:!1,result:n})}).catch(function(n){r||f({loading:!1,error:n})}),function(){r=!0,null==o||o()};f(k)},r),i},M=function(n){var r,t;function e(r,t){var e;return(e=n.call(this,r||"Fetch Error")||this).status=t,e}return t=n,(r=e).prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t,e}(F(Error)),x=function(r,t){return function(e,u,o,c){var i=n();return _(function(){try{var n=new AbortController;return i.current=n,Promise.resolve(r(e,O({},u,{signal:n.signal}))).then(function(n){var r=!1;function e(t){if(r)return t;throw new M(n.statusText,n.status)}var u=function(){if(n.ok)return Promise.resolve(t(n)).then(function(n){return r=!0,n})}();return u&&u.then?u.then(e):e(u)})}catch(n){return Promise.reject(n)}},o,c,function(){var n;return null==(n=i.current)?void 0:n.abort()})}},T=function(n){return function(r){var e=h(r);t(function(){var r=n.listen(function(n,r){return null==e.current?void 0:e.current(n,r)});return function(){return r()}},[e])}},q=function(){return i()?{x:window.scrollX,y:window.scrollY}:{}},R=function(){return i()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{}},H=function(n){return function(n){return n instanceof Object&&n.nativeEvent instanceof Event}(n)&&n.persist()},C=function(r){return function(e,o,c){var i=h(e),f=n(r(e,o,c));return t(function(){return f.current=r(function(){return i.current.apply(i,arguments)},o,c),function(){var n;return null==(n=f.current)?void 0:n.cancel()}},[i,c,o]),u(function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.forEach(H),f.current.apply(f,r)},[])}},W=function(r){return function(u,o,c,i){var f=e(),a=f[0],l=f[1],v=h(u),d=n(r(u,c,i));return t(function(){return d.current=r(function(){var n=v.current.apply(v,arguments);return l(n),n},c,i),function(){var n;return null==(n=d.current)?void 0:n.cancel()}},[v,i,c]),t(function(){d.current.apply(d,o)},o),a}},B=function(n){return t(n,[])},D=function(){var r=n(!1);return B(function(){return r.current=!0,function(){r.current=!1}}),u(function(){return r.current},[])},z=function(n,r,u){return function(o,c){void 0===c&&(c=k);var i=D(),f=e(c),a=f[0],l=f[1];return t(function(){if(r(o)){var t=o.id&&document.querySelector(n+"#"+o.id)||document.createElement(n);Object.assign(t,o);var e=function(){i()&&l(k)},c=function(n){i()&&l({loading:!1,error:n.error})};return t.addEventListener("load",e,!1),t.addEventListener("error",c,!1),l(I),u(t),function(){t.removeEventListener("load",e,!1),t.removeEventListener("error",c,!1)}}l(k)},[o,i]),a}},N=function(n){return function(){var r=o(n).location.search;return f(r)}},U=function(n,r){void 0===r&&(r=[]);var e=h(n);t(function(){var n=requestAnimationFrame(function(n){return null==e.current?void 0:e.current(n)});return function(){return cancelAnimationFrame(n)}},r)},V=function(n,r){switch(r.type){case"append":return[].concat(n,[r.payload]);case"prepend":return[r.payload].concat(n);case"filter":return n.filter(r.payload);default:return n}},X=function(n){void 0===n&&(n=[]);var r=c(V,n),t=r[1];return[r[0],u(function(n){return t({type:"append",payload:n})},[t]),u(function(n){return t({type:"prepend",payload:n})},[t]),u(function(n){return t({type:"filter",payload:n})},[t])]},Y=C(a),G=W(a),J=function(n,r){return void 0===r&&(r=[]),t(function(){var r=function(n,r){var t=r.href,e=r.target,u={href:n.href,target:n.target};return t&&(n.href=t),e&&(n.target=e),u},t=document.querySelector("base");if(t){var e=t,u=r(e,n);return function(){return r(e,u)}}var o=document.createElement("base");return r(o,n),document.head.insertAdjacentElement("afterbegin",o),function(){return o.remove()}},r)},K=function(r,t){void 0===t&&(t=[]);var e=h(r),o=n();return u(function(){o.current&&o.current();for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];o.current=null==e.current?void 0:e.current.apply(e,r)},t)},Q=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.checked;return r.forEach(function(n){return null==n?void 0:n(Boolean(t))})},r)},Z=function(n){void 0===n&&(n=!1);var r=e(n),t=r[1];return[r[0],t,Q(t)]},$=function(r){var t=n(r);return{set:function(n){t.current=n},get:function(){return t.current},is:function(n){return t.current===n}}},nn=function(n,r){void 0===r&&(r=null);for(var t=arguments.length,e=new Array(t>2?t-2:0),o=2;o<t;o++)e[o-2]=arguments[o];return u(function(){for(var t=arguments.length,u=new Array(t),o=0;o<t;o++)u[o]=arguments[o];return null==n?void 0:n.apply(r,[].concat(e,u))},[n].concat(e))},rn=C(l),tn=W(l),en=function(n){return B(n)},un=function(r,e){var u=n(!1);t(u.current?r:function(){u.current=!0},e)},on=function(n,r,e){void 0===e&&(e=[]);var u=h(r);t(function(){var r=u.current,t=("function"==typeof r?r():document.querySelector(r))||document.createElement("link");t instanceof HTMLLinkElement&&(Object.assign(t,n),document.head.appendChild(t))},e)},cn=function(n){return on({href:n,rel:"shortcut icon",type:"image/x-icon"},"link[rel='shortcut icon']",[n])},fn=x(fetch,function(n){return n.json()}),an=x(fetch,function(n){return n.arrayBuffer()}),ln=x(fetch,function(n){return n.blob()}),vn=x(fetch,function(n){return n.formData()}),dn=x(fetch,function(n){return Promise.resolve(n.body)}),sn=x(fetch,function(n){return n.text()}),mn=function(){return c(m,m())},pn=function(){return mn()[1]},hn=function(n,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var e=u(function(r){var t;!document.fullscreenElement||!1!==r&&void 0!==r||document.exitFullscreen(),document.fullscreenElement||!0!==r&&void 0!==r||null==(t=n.current)||null==t.requestFullscreen||t.requestFullscreen()},[n]);return g(document,"fullscreenchange",r),g(document,"fullscreenerror",t),e},yn=function(n){var r=e(!1),t=r[0],u=r[1],o=hn(n,function(){return u(!!document.fullscreenElement&&document.fullscreenElement===n.current)});return[t,o,nn(o,null,!0),nn(o,null,!1)]},gn=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.files;return r.forEach(function(n){return null==n?void 0:n(t)})},r)},bn=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.value;return r.forEach(function(n){return null==n?void 0:n(Number(t))})},r)},wn=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return u(function(n){var t=n.target.value;return r.forEach(function(n){return null==n?void 0:n(String(t))})},r)};function En(n,r){try{var t=n()}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var On=function(n,t,e,u){void 0===u&&(u=[]);var o=h(t);r(function(){var r=n();if(r&&r.length){var t=e&&O({},e,{root:v(e.root)}),u=new IntersectionObserver(function(n,r){return null==o.current?void 0:o.current(n,r)},t);return r.forEach(function(n){return u.observe(n)}),function(){return u.disconnect()}}},u)},Sn=function(n){return n instanceof Object},An=function(r,t){var e=n(!1),u="boolean"==typeof(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:void 0,o=Sn(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:Sn(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:void 0;On(function(){return r.current&&[r.current]},function(n){try{var r=function(){e.current=!1};if(u||e.current||n.every(function(n){return!n.isIntersecting}))return Promise.resolve();e.current=!0;var o=En(function(){return Promise.resolve(Promise.resolve(t())).then(function(){})},function(){});return Promise.resolve(o&&o.then?o.then(r):r())}catch(n){return Promise.reject(n)}},o)},jn=function(n,r,t){return On(function(){return n.current&&[n.current]},r,t,[t])},Pn=function(n,r){var e=r.period,u=r.leading,o=r.running,c=r.deps,i=void 0===c?[e,u,o]:c,f=h(n);t(function(){var n;return o&&(u&&(null==f.current||f.current()),n=setInterval(function(){return null==f.current?void 0:f.current()},e)),function(){n&&clearInterval(n)}},i)},Fn=function(n){return n.dataset.src},Ln=function(r){var t=void 0===r?{}:r,e=t.getSrc,o=void 0===e?Fn:e,c=L(t,["getSrc"]),i=n(new Map),f=u(function(n){if("string"==typeof n){var r=n;return function(n){i.current.set(n,r)}}if(n instanceof HTMLImageElement){var t=n,e=o(t);e&&i.current.set(t,e)}},[o]);return On(function(){return Array.from(i.current.keys())},function(n,r){return n.forEach(function(n){var t=n.target;if(n.isIntersecting&&t instanceof HTMLImageElement){var e=i.current.get(t)||o(t);e&&(t.src=e),r.unobserve(t)}})},c),f},kn=z("link",function(n){var r=n.href;return i()&&!!r&&!document.querySelector('link[href="'+r+'"]')},function(n){return document.head.appendChild(n)}),In=function(n){return p(n,"matches","media")},_n=function(n,r){void 0===r&&(r={media:"",matches:!1});var u=e(i()?function(){return In(window.matchMedia(n))}:r),o=u[0],c=u[1];return t(function(){var r=window.matchMedia(n),t=function(n){c(n)};return c(In(r)),r.addListener(t),function(){return r.removeListener(t)}},[n]),o},Mn=function(n,t,e){var u=h(t);r(function(){if(n.current){var r=new MutationObserver(function(n,r){return null==u.current?void 0:u.current(n,r)});return r.observe(n.current,e),function(){return r.disconnect()}}},[u,n,e])},xn=function(n){void 0===n&&(n=0);var r=e(n),t=r[1];return[r[0],t,bn(t)]},Tn=function(n,r){return g(document,["mousedown","touchstart"],function(t){r&&n.current&&!n.current.contains(t.target)&&r(t)})},qn=function(n){return g(document,"visibilitychange",function(){return null==n?void 0:n(document.visibilityState)})},Rn=function(){var n=e(document.visibilityState),r=n[0];return qn(n[1]),r},Hn=function(){return!0},Cn=function(r,e){void 0===e&&(e=Hn);var u=n();return t(function(){e(r)&&(u.current=r)},[r]),u.current},Wn=function(n,r,t){void 0===r&&(r=[]),void 0===t&&(t=k);var o=D(),c=e(t),i=c[0],f=c[1],a=$();return[i,u(function(){var r=n.apply(void 0,arguments);a.set(r),r?(f(I),r.then(function(n){a.is(r)&&o()&&f({loading:!1,result:n})}).catch(function(n){a.is(r)&&o()&&f({loading:!1,error:n})})):f(k)},r)]},Bn=function(n,t){var e=h(t);r(function(){if(n.current){var r=new ResizeObserver(function(n){return null==e.current?void 0:e.current(n)});return r.observe(n.current),function(){return r.disconnect()}}},[e,n])},Dn=C(d),zn=W(d),Nn=z("script",function(n){var r=n.src;return i()&&!!r&&!document.querySelector('script[src="'+r+'"]')},function(n){return document.body.appendChild(n)}),Un=function(n){return null==n?void 0:n.getAttribute("id")},Vn=function(r){var t=void 0===r?{}:r,o=t.getId,c=void 0===o?Un:o,i=t.threshold,f=void 0===i?1:i,a=L(t,["getId","threshold"]),l=e(),v=l[0],d=l[1],s=n(new Map),m=n(new Set),p=u(function(n){if("string"==typeof n){var r=n;return function(n){s.current.set(n,r)}}if(n instanceof Element){var t=n,e=c(t);e&&s.current.set(t,e)}},[c]);return On(function(){return Array.from(s.current.keys())},function(n){if(n.forEach(function(n){var r=n.target;n.intersectionRatio>=f?m.current.add(r):m.current.delete(r)}),m.current.size){var r=Array.from(m.current).reduce(function(n,r){return n.getBoundingClientRect().top<r.getBoundingClientRect().top?n:r}),t=s.current.get(r)||c(r);"string"==typeof t&&d(t)}},O({},a,{threshold:f})),[v,p]},Xn=function(n){void 0===n&&(n="");var r=e(n),t=r[1];return[r[0],t,wn(t)]},Yn=C(s),Gn=W(s),Jn=function(){return!0},Kn=function(r,e,u){void 0===e&&(e=!0),void 0===u&&(u=Jn);var o=n([]);return t(function(){u(r)&&(o.current=e?[r].concat(o.current):[].concat(o.current,[r]))},[r]),o.current},Qn=function(n,r,e){void 0===e&&(e=[r]);var u=h(n);t(function(){var n=setTimeout(function(){return null==u.current?void 0:u.current()},r);return function(){return clearTimeout(n)}},e)},Zn=function(r,t){var e=h(r),o=n();return en(function(){o.current&&(clearTimeout(o.current.handle),o.current.resolve())}),u(function(){return new Promise(function(n){o.current&&(clearTimeout(o.current.handle),o.current.resolve());var r=setTimeout(function(){null==e.current||e.current(),n()},t);o.current={handle:r,resolve:n}})},[e,t])},$n=function(n){return B(function(){return n})},nr=function(r,e){var u=n(document.title);t(function(){document.title=r},[r]),$n(function(){(null==e?void 0:e.restoreOnUnmount)&&(document.title=u.current)})},rr=function(n){void 0===n&&(n=!1);var r=e(n),t=r[1];return[r[0],u(function(){return t(function(n){return!n})},[]),nn(t,null,!0),nn(t,null,!1),t]},tr=function(){var n=e(q),r=n[0],t=n[1];return g(window,"scroll",function(){return t(q())},{capture:!1,passive:!0,usingAnimationFrame:!0}),r},er=function(){var n=e(R),r=n[0],t=n[1];return g(window,"resize",function(){return t(R())}),r},ur=function(r,t,o){void 0===o&&(o=k);var c=e(o),i=c[0],f=c[1],a=n(),l=u(function(n,e){a.current&&a.current.terminate();var u=new Worker(r,t);u.addEventListener("message",function(n){return f({loading:!1,result:n.data})}),u.addEventListener("error",function(n){return f({loading:!1,error:n.error})}),u.postMessage(n,e),f(I),a.current=u},[t,r]);return $n(function(){a.current&&a.current.terminate()}),[i,l]};export{E as createBeforeLeaveHook,x as createFetchHook,w as createHistoryBlockHook,T as createHistoryListenHook,C as createRateLimitHook,W as createRateLimitValueHook,z as createResourceHook,N as createSearchParamsObjectHook,U as useAnimationFrame,X as useArray,Y as useAudit,G as useAuditValue,J as useBase,K as useCallbackWithCleanup,Z as useCheckInput,$ as useCurrent,nn as useCurryFunction,rn as useDebounce,tn as useDebounceValue,en as useDidMount,un as useDidUpdate,B as useEffectOnce,g as useEvent,cn as useFavicon,fn as useFetch,an as useFetchArrayBuffer,ln as useFetchBlob,vn as useFetchFormData,dn as useFetchStream,sn as useFetchText,pn as useForceUpdate,yn as useFullscreen,Q as useHandleChangeCheck,gn as useHandleChangeFile,bn as useHandleChangeNumber,wn as useHandleChangeText,An as useInfiniteScroll,jn as useIntersectionObserver,On as useIntersectionObserverEffect,Pn as useInterval,D as useIsMounted,Ln as useLazyLoad,kn as useLink,_n as useMediaQuery,Mn as useMutationObserver,xn as useNumberInput,Tn as useOnClickOutside,qn as usePageVisibility,Rn as usePageVisibilityState,Cn as usePrevious,_ as usePromise,Wn as usePromiseCallback,Bn as useResizeObserver,Dn as useSample,zn as useSampleValue,Nn as useScript,Vn as useScrollSpy,Xn as useTextInput,Yn as useThrottle,Gn as useThrottleValue,Kn as useTimeline,Qn as useTimeout,Zn as useTimeoutCallback,nr as useTitle,rr as useToggle,hn as useToggleFullscreen,mn as useTriggerUpdate,on as useUpdatedLink,h as useUpdatedRef,$n as useWillUnmount,b as useWindowBeforeUnload,tr as useWindowScrollOffset,er as useWindowSize,ur as useWorkerCallback};
//# sourceMappingURL=index.mjs.map
