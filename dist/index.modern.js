import{useRef as r,useLayoutEffect as e,useEffect as n,useCallback as t,useState as u,useReducer as i}from"react";import o from"json2mq";var a=(n,t)=>{var u=r(n);return e(()=>{u.current=n},t),u},c=function(r,e){void 0===e&&(e=[]);var t=a(r);n(()=>{var r=requestAnimationFrame(r=>null==t.current?void 0:t.current(r));return()=>cancelAnimationFrame(r)},e)},l=()=>({}),v=()=>"undefined"!=typeof window&&void 0!==window.document,d=()=>v()?{x:window.scrollX,y:window.scrollY}:{},s=()=>v()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{},f=r=>(r=>r instanceof Object&&r.nativeEvent instanceof Event)(r)&&r.persist(),g=e=>(u,i,o)=>{var c=a(u),l=r(e(u,i,o));return n(()=>(l.current=e(function(){return c.current(...arguments)},i,o),()=>{var r;return null==(r=l.current)?void 0:r.cancel()}),[c,o,i]),t(function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return e.forEach(f),l.current(...e)},[])},m=(r,e)=>{var n,t=null,u=null,i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return u=o,null===t&&(t=setTimeout(()=>{null!==u&&(n=r(...u),u=null),t=null},e)),n};return i.cancel=()=>{null!==t&&clearTimeout(t),t=null,u=null},i},h=g(m),w=e=>(t,i,o,c)=>{var[l,v]=u(),d=a(t),s=r(e(t,o,c));return n(()=>(s.current=e(function(){var r=d.current(...arguments);return v(r),r},o,c),()=>{var r;return null==(r=s.current)?void 0:r.cancel()}),[d,c,o]),n(()=>{s.current(...i)},i),l},y=w(m),p=function(e,n){void 0===n&&(n=[]);var u=a(e),i=r();return t(function(){i.current&&i.current();for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];i.current=null==u.current?void 0:u.current(...e)},n)},E=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{checked:n}}=r;return e.forEach(r=>null==r?void 0:r(Boolean(n)))},e)},A=function(r){void 0===r&&(r=!1);var[e,n]=u(r);return[e,n,E(n)]},b=e=>{var n=r(e);return{set:r=>{n.current=r},get:()=>n.current,is:r=>n.current===r}},T=function(r,e){void 0===e&&(e=null);for(var n=arguments.length,u=new Array(n>2?n-2:0),i=2;i<n;i++)u[i-2]=arguments[i];return t(function(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return null==r?void 0:r.apply(e,[...u,...t])},[r,...u])},I=function(r,e,n){var t,{leading:u,trailing:i}=void 0===n?{trailing:!0}:n,o=null,a=null,c=function(){for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return o=c,null!==a?clearTimeout(a):u&&(t=r(...o),o=null),a=setTimeout(()=>{i&&null!==o&&(t=r(...o),o=null),a=null},e),t};return c.cancel=()=>{null!==a&&clearTimeout(a),o=null,a=null},c},L=g(I),F=w(I),O=r=>n(r,[]),q=r=>O(r),M=(e,t)=>{var u=r(!1);n(u.current?e:()=>{u.current=!0},t)},j=(r,e,n)=>{var t;r&&(!n||(t=e.target)instanceof Object&&"matches"in t&&e.target.matches(n))&&r(e)},k=function(e,t,u,i){var{capture:o,once:c,passive:l,selectors:v,usingAnimationFrame:d,enabled:s=!0}=void 0===i?{}:i,f=a(u),g=r(0);n(()=>{if(s){var r=(r=>r instanceof Function?r():r)(e);if(r){var n=r=>{d?(cancelAnimationFrame(g.current),g.current=requestAnimationFrame(()=>j(f.current,r,v))):j(f.current,r,v)},u=Array.isArray(t)?t:[t];return u.forEach(e=>r.addEventListener(e,n,{capture:o,once:c,passive:l})),()=>{d&&g.current&&cancelAnimationFrame(g.current),u.forEach(e=>r.removeEventListener(e,n,{capture:o}))}}}},[e,o,c,l,v,d,s,...t])},S=()=>i(l,{}),H=()=>S()[1],W=function(r,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var u=t(e=>{var n;!document.fullscreenElement||!1!==e&&void 0!==e||document.exitFullscreen(),document.fullscreenElement||!0!==e&&void 0!==e||null==(n=r.current)||null==n.requestFullscreen||n.requestFullscreen()},[r]);return k(document,"fullscreenchange",e),k(document,"fullscreenerror",n),u},x=r=>{var[e,n]=u(!1),t=W(r,()=>n(!!document.fullscreenElement&&document.fullscreenElement===r.current));return[e,t,T(t,null,!0),T(t,null,!1)]},z=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{files:n}}=r;return e.forEach(r=>null==r?void 0:r(n))},e)},B=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{value:n}}=r;return e.forEach(r=>null==r?void 0:r(Number(n)))},e)},C=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{value:n}}=r;return e.forEach(r=>null==r?void 0:r(String(n)))},e)},R=function(r,n,t,u){void 0===u&&(u=[]);var i=a(n);e(()=>{var e=r();if(e&&e.length){var n=new IntersectionObserver((r,e)=>null==i.current?void 0:i.current(r,e),t);return e.forEach(r=>n.observe(r)),()=>n.disconnect()}},u)},P=r=>r instanceof Object,D=function(e,n){var t=r(!1),u="boolean"==typeof(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:void 0,i=P(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:P(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:void 0;R(()=>e.current&&[e.current],async r=>{if(!(u||t.current||r.every(r=>{var{isIntersecting:e}=r;return!e}))){t.current=!0;try{await Promise.resolve(n())}catch(r){}t.current=!1}},i)},N=(r,e,n)=>R(()=>r.current&&[r.current],e,n,[n]),V=(r,e)=>{var{period:t,leading:u,running:i,deps:o=[t,u,i]}=e,c=a(r);n(()=>{var r;return i&&(u&&(null==c.current||c.current()),r=setInterval(()=>null==c.current?void 0:c.current(),t)),()=>{r&&clearInterval(r)}},o)},X=()=>{var e=r(!1);return O(()=>(e.current=!0,()=>{e.current=!1})),t(()=>e.current,[])};function Y(r,e){if(null==r)return{};var n,t,u={},i=Object.keys(r);for(t=0;t<i.length;t++)e.indexOf(n=i[t])>=0||(u[n]=r[n]);return u}var G=r=>r.dataset.src,J=function(e){void 0===e&&(e={});var{getSrc:n=G}=e,u=Y(e,["getSrc"]),i=r(new Map),o=t(r=>{if("string"==typeof r){var e=r;return r=>{i.current.set(r,e)}}if(r instanceof HTMLImageElement){var t=r,u=n(t);u&&i.current.set(t,u)}},[n]);return R(()=>Array.from(i.current.keys()),(r,e)=>r.forEach(r=>{var{isIntersecting:t,target:u}=r;if(t&&u instanceof HTMLImageElement){var o=i.current.get(u)||n(u);o&&(u.src=o),e.unobserve(u)}}),u),o},K={loading:!1},Q={loading:!0},U=(r,e)=>function(t,i){void 0===i&&(i=K);var o=X(),[a,c]=u(i);return n(()=>{if(e(t)){var n=t.id&&document.querySelector(r+"#"+t.id)||document.createElement(r);Object.assign(n,t);var u=()=>{o()&&c(K)},i=r=>{o()&&c({loading:!1,error:r.error})};return n.addEventListener("load",u,!1),n.addEventListener("error",i,!1),c(Q),document.body.appendChild(n),()=>{n.removeEventListener("load",u,!1),n.removeEventListener("error",i,!1)}}c(K)},[t,o]),a},Z=U("link",r=>{var{href:e}=r;return v()&&!!e&&!document.querySelector('link[href="'+e+'"]')}),$=r=>{return e=r,Object.fromEntries(["matches","media"].map(r=>[r,e[r]]));var e},_=function(r,e){void 0===e&&(e={media:"",matches:!1});var t="string"==typeof r?r:o(r),[i,a]=u(v()?()=>$(window.matchMedia(t)):e);return n(()=>{var r=window.matchMedia(t),e=r=>{a(r)};return a($(r)),r.addListener(e),()=>r.removeListener(e)},[t]),i},rr=(r,n,t)=>{var u=a(n);e(()=>{if(r.current){var e=new MutationObserver((r,e)=>null==u.current?void 0:u.current(r,e));return e.observe(r.current,t),()=>e.disconnect()}},[u,r,t])},er=function(r){void 0===r&&(r=0);var[e,n]=u(r);return[e,n,B(n)]},nr=(r,e)=>k(document,["mousedown","touchstart"],n=>{e&&r.current&&!r.current.contains(n.target)&&e(n)}),tr=e=>{var t=r();return n(()=>{t.current=e}),t.current},ur=function(r,e,t){void 0===e&&(e=[]),void 0===t&&(t=K);var[i,o]=u(t);return n(()=>{var e=!1,n=r();if(n)return o(Q),n.then(r=>{e||o({loading:!1,result:r})}).catch(r=>{e||o({loading:!1,error:r})}),()=>{e=!0};o(K)},e),i},ir=function(r,e,n){void 0===e&&(e=[]),void 0===n&&(n=K);var i=X(),[o,a]=u(n),c=b();return[o,t(function(){var e=r(...arguments);c.set(e),e?(a(Q),e.then(r=>{c.is(e)&&i()&&a({loading:!1,result:r})}).catch(r=>{c.is(e)&&i()&&a({loading:!1,error:r})})):a(K)},e)]},or=(r,n)=>{var t=a(n);e(()=>{if(r.current){var e=new ResizeObserver(r=>null==t.current?void 0:t.current(r));return e.observe(r.current),()=>e.disconnect()}},[t,r])},ar=(r,e)=>{var n,t=null,u=setInterval(()=>{t&&(n=r(...t),t=null)},e),i=function(){for(var r=arguments.length,e=new Array(r),u=0;u<r;u++)e[u]=arguments[u];return t=e,n};return i.cancel=()=>{clearInterval(u),t=null},i},cr=g(ar),lr=w(ar),vr=U("script",r=>{var{src:e}=r;return v()&&!!e&&!document.querySelector('script[src="'+e+'"]')}),dr=r=>null==r?void 0:r.getAttribute("id"),sr=function(e){void 0===e&&(e={threshold:1});var{getId:n=dr}=e,i=Y(e,["getId"]),[o,a]=u(),c=r(new Map),l=r(new Set),v=t(r=>{if("string"==typeof r){var e=r;return r=>{c.current.set(r,e)}}if(r instanceof Element){var t=r,u=n(t);u&&c.current.set(t,u)}},[n]);return R(()=>Array.from(c.current.keys()),r=>{if(r.forEach(r=>{var{isIntersecting:e,target:n}=r;e?l.current.add(n):l.current.delete(n)}),l.current.size){var e=Array.from(l.current).reduce((r,e)=>r.getBoundingClientRect().top<e.getBoundingClientRect().top?r:e),t=c.current.get(e)||n(e);"string"==typeof t&&a(t)}},i),[o,v]},fr=function(r){void 0===r&&(r="");var[e,n]=u(r);return[e,n,C(n)]},gr=function(r,e,n){var t,{leading:u,trailing:i}=void 0===n?{leading:!0,trailing:!0}:n,o=null,a=null,c=function(){for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return o=c,null===a&&(u&&(t=r(...o),o=null),a=setTimeout(()=>{i&&null!==o&&(t=r(...o),o=null),a=null},e)),t};return c.cancel=()=>{null!==a&&clearTimeout(a),o=null,a=null},c},mr=g(gr),hr=w(gr),wr=function(r,e,t){void 0===t&&(t=[e]);var u=a(r);n(()=>{var r=setTimeout(()=>null==u.current?void 0:u.current(),e);return()=>clearTimeout(r)},t)},yr=(e,n)=>{var u=a(e),i=r();return q(()=>{i.current&&(clearTimeout(i.current.handle),i.current.resolve())}),t(()=>new Promise(r=>{i.current&&(clearTimeout(i.current.handle),i.current.resolve());var e=setTimeout(()=>{null==u.current||u.current(),r()},n);i.current={handle:e,resolve:r}}),[u,n])},pr=function(r){void 0===r&&(r=!1);var[e,n]=u(r);return[e,t(()=>n(r=>!r),[]),T(n,null,!0),T(n,null,!1),n]},Er=r=>O(()=>r),Ar=function(r,e){return void 0===e&&(e=!0),k(window,"beforeunload",e=>(e.preventDefault(),r&&(e.returnValue=r),r),{enabled:e})},br=()=>{var[r,e]=u(d);return k(window,"scroll",()=>e(d()),{capture:!1,passive:!0,usingAnimationFrame:!0}),r},Tr=()=>{var[r,e]=u(s);return k(window,"resize",()=>e(s())),r},Ir=function(e,n,i){void 0===i&&(i=K);var[o,a]=u(i),c=r(),l=t((r,t)=>{c.current&&c.current.terminate();var u=new Worker(e,n);u.addEventListener("message",r=>a({loading:!1,result:r.data})),u.addEventListener("error",r=>a({loading:!1,error:r.error})),u.postMessage(r,t),a(Q),c.current=u},[n,e]);return Er(()=>{c.current&&c.current.terminate()}),[o,l]};export{c as useAnimationFrame,h as useAudit,y as useAuditValue,p as useCallbackWithCleanup,A as useCheckInput,b as useCurrent,T as useCurryFunction,L as useDebounce,F as useDebounceValue,q as useDidMount,M as useDidUpdate,O as useEffectOnce,k as useEvent,H as useForceUpdate,x as useFullscreen,E as useHandleChangeCheck,z as useHandleChangeFile,B as useHandleChangeNumber,C as useHandleChangeText,D as useInfiniteScroll,N as useIntersectionObserver,R as useIntersectionObserverEffect,V as useInterval,X as useIsMounted,J as useLazyLoad,Z as useLink,_ as useMediaQuery,rr as useMutationObserver,er as useNumberInput,nr as useOnClickOutside,tr as usePrevious,ur as usePromise,ir as usePromiseCallback,or as useResizeObserver,cr as useSample,lr as useSampleValue,vr as useScript,sr as useScrollSpy,fr as useTextInput,mr as useThrottle,hr as useThrottleValue,wr as useTimeout,yr as useTimeoutCallback,pr as useToggle,W as useToggleFullscreen,S as useTriggerUpdate,a as useUpdatedRef,Er as useWillUnmount,Ar as useWindowBeforeUnload,br as useWindowScrollOffset,Tr as useWindowSize,Ir as useWorkerCallback};
//# sourceMappingURL=index.modern.js.map
