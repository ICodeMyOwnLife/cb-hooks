import{useRef as r,useLayoutEffect as e,useEffect as n,useCallback as t,useState as u,useReducer as a}from"react";import c from"json2mq";var i=(n,t)=>{var u=r(n);return e(()=>{u.current=n},t),u},o=function(r,e){void 0===e&&(e=[]);var t=i(r);n(()=>{var r=requestAnimationFrame(r=>null==t.current?void 0:t.current(r));return()=>cancelAnimationFrame(r)},e)},l=()=>({}),v=()=>"undefined"!=typeof window&&void 0!==window.document,d=()=>v()?{x:window.scrollX,y:window.scrollY}:{},s=()=>v()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{},f=r=>(r=>r instanceof Object&&r.nativeEvent instanceof Event)(r)&&r.persist(),m=e=>(u,a,c)=>{var o=i(u),l=r(e(u,a,c));return n(()=>(l.current=e(function(){return o.current(...arguments)},a,c),()=>{var r;return null==(r=l.current)?void 0:r.cancel()}),[o,c,a]),t(function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return e.forEach(f),l.current(...e)},[])},g=(r,e)=>{var n,t=null,u=null,a=function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return u=c,null===t&&(t=setTimeout(()=>{null!==u&&(n=r(...u),u=null),t=null},e)),n};return a.cancel=()=>{null!==t&&clearTimeout(t),t=null,u=null},a},h=m(g),w=e=>(t,a,c,o)=>{var[l,v]=u(),d=i(t),s=r(e(t,c,o));return n(()=>(s.current=e(function(){var r=d.current(...arguments);return v(r),r},c,o),()=>{var r;return null==(r=s.current)?void 0:r.cancel()}),[d,o,c]),n(()=>{s.current(...a)},a),l},p=w(g),E=function(e,n){void 0===n&&(n=[]);var u=i(e),a=r();return t(function(){a.current&&a.current();for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];a.current=null==u.current?void 0:u.current(...e)},n)},y=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{checked:n}}=r;return e.forEach(r=>null==r?void 0:r(Boolean(n)))},e)},A=function(r){void 0===r&&(r=!1);var[e,n]=u(r);return[e,n,y(n)]},b=e=>{var n=r(e);return{set:r=>{n.current=r},get:()=>n.current,is:r=>n.current===r}},T=function(r,e){void 0===e&&(e=null);for(var n=arguments.length,u=new Array(n>2?n-2:0),a=2;a<n;a++)u[a-2]=arguments[a];return t(function(){for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return null==r?void 0:r.apply(e,[...u,...t])},[r,...u])},L=function(r,e,n){var t,{leading:u,trailing:a}=void 0===n?{trailing:!0}:n,c=null,i=null,o=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return c=o,null!==i?clearTimeout(i):u&&(t=r(...c),c=null),i=setTimeout(()=>{a&&null!==c&&(t=r(...c),c=null),i=null},e),t};return o.cancel=()=>{null!==i&&clearTimeout(i),c=null,i=null},o},F=m(L),I=w(L),O=r=>n(r,[]),q=r=>O(r),M=(e,t)=>{var u=r(!1);n(u.current?e:()=>{u.current=!0},t)},H=(r,e,n)=>{var t;r&&(!n||(t=e.target)instanceof Object&&"matches"in t&&e.target.matches(n))&&r(e)},j=function(e,t,u,a){var{capture:c,once:o,passive:l,selectors:v,usingAnimationFrame:d,enabled:s=!0}=void 0===a?{}:a,f=i(u),m=r(0);n(()=>{if(s){var r=(r=>r instanceof Function?r():r)(e);if(r){var n=r=>{d?(cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>H(f.current,r,v))):H(f.current,r,v)},u=Array.isArray(t)?t:[t];return u.forEach(e=>r.addEventListener(e,n,{capture:c,once:o,passive:l})),()=>{d&&m.current&&cancelAnimationFrame(m.current),u.forEach(e=>r.removeEventListener(e,n,{capture:c}))}}}},[e,c,o,l,v,d,s,...t])},S=()=>a(l,{}),W=()=>S()[1],k=function(r,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var u=t(e=>{var n;!document.fullscreenElement||!1!==e&&void 0!==e||document.exitFullscreen(),document.fullscreenElement||!0!==e&&void 0!==e||null==(n=r.current)||null==n.requestFullscreen||n.requestFullscreen()},[r]);return j(document,"fullscreenchange",e),j(document,"fullscreenerror",n),u},x=r=>{var[e,n]=u(!1),t=k(r,()=>n(!!document.fullscreenElement&&document.fullscreenElement===r.current));return[e,t,T(t,null,!0),T(t,null,!1)]},z=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{files:n}}=r;return e.forEach(r=>null==r?void 0:r(n))},e)},B=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{value:n}}=r;return e.forEach(r=>null==r?void 0:r(Number(n)))},e)},C=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return t(r=>{var{target:{value:n}}=r;return e.forEach(r=>null==r?void 0:r(String(n)))},e)},R=(r,n,t)=>{var u=i(n);e(()=>{if(r.current){var e=new IntersectionObserver((r,e)=>null==u.current?void 0:u.current(r,e),t);return e.observe(r.current),()=>e.disconnect()}},[u,r,t])},D=(r,e)=>{var{period:t,leading:u,running:a,deps:c=[t,u,a]}=e,o=i(r);n(()=>{var r;return a&&(u&&(null==o.current||o.current()),r=setInterval(()=>null==o.current?void 0:o.current(),t)),()=>{r&&clearInterval(r)}},c)},N=()=>{var e=r(!1);return O(()=>(e.current=!0,()=>{e.current=!1})),t(()=>e.current,[])},P=()=>{var e=r(new Map),u=t(r=>{if("string"==typeof r){var n=r;return r=>{e.current.set(r,n)}}if(r instanceof HTMLImageElement){var t=r,{src:u}=t.dataset;u&&e.current.set(t,u)}},[]);return n(()=>{var r=new IntersectionObserver((r,n)=>r.forEach(r=>{var{isIntersecting:t,target:u}=r;if(t&&u instanceof HTMLImageElement){var a=e.current.get(u)||u.dataset.src;a&&(u.src=a),n.unobserve(u)}}));return e.current.forEach((e,n)=>r.observe(n)),()=>r.disconnect()},[]),u},V={loading:!1},X={loading:!0},Y=(r,e)=>function(t,a){void 0===a&&(a=V);var c=N(),[i,o]=u(a);return n(()=>{if(e(t)){var n=t.id&&document.querySelector(r+"#"+t.id)||document.createElement(r);Object.assign(n,t);var u=()=>{c()&&o(V)},a=r=>{c()&&o({loading:!1,error:r.error})};return n.addEventListener("load",u,!1),n.addEventListener("error",a,!1),o(X),document.body.appendChild(n),()=>{n.removeEventListener("load",u,!1),n.removeEventListener("error",a,!1)}}o(V)},[t,c]),i},G=Y("link",r=>{var{href:e}=r;return v()&&!!e&&!document.querySelector('link[href="'+e+'"]')}),J=r=>{return e=r,Object.fromEntries(["matches","media"].map(r=>[r,e[r]]));var e},K=function(r,e){void 0===e&&(e={media:"",matches:!1});var t="string"==typeof r?r:c(r),[a,i]=u(v()?()=>J(window.matchMedia(t)):e);return n(()=>{var r=window.matchMedia(t),e=r=>{i(r)};return i(J(r)),r.addListener(e),()=>r.removeListener(e)},[t]),a},Q=(r,n,t)=>{var u=i(n);e(()=>{if(r.current){var e=new MutationObserver((r,e)=>null==u.current?void 0:u.current(r,e));return e.observe(r.current,t),()=>e.disconnect()}},[u,r,t])},U=function(r){void 0===r&&(r=0);var[e,n]=u(r);return[e,n,B(n)]},Z=(r,e)=>j(document,["mousedown","touchstart"],n=>{e&&r.current&&!r.current.contains(n.target)&&e(n)}),$=e=>{var t=r();return n(()=>{t.current=e}),t.current},_=function(r,e,t){void 0===e&&(e=[]),void 0===t&&(t=V);var[a,c]=u(t);return n(()=>{var e=!1,n=r();if(n)return c(X),n.then(r=>{e||c({loading:!1,result:r})}).catch(r=>{e||c({loading:!1,error:r})}),()=>{e=!0};c(V)},e),a},rr=function(r,e,n){void 0===e&&(e=[]),void 0===n&&(n=V);var a=N(),[c,i]=u(n),o=b();return[c,t(function(){var e=r(...arguments);o.set(e),e?(i(X),e.then(r=>{o.is(e)&&a()&&i({loading:!1,result:r})}).catch(r=>{o.is(e)&&a()&&i({loading:!1,error:r})})):i(V)},e)]},er=(r,n)=>{var t=i(n);e(()=>{if(r.current){var e=new ResizeObserver(r=>null==t.current?void 0:t.current(r));return e.observe(r.current),()=>e.disconnect()}},[t,r])},nr=(r,e)=>{var n,t=null,u=setInterval(()=>{t&&(n=r(...t),t=null)},e),a=function(){for(var r=arguments.length,e=new Array(r),u=0;u<r;u++)e[u]=arguments[u];return t=e,n};return a.cancel=()=>{clearInterval(u),t=null},a},tr=m(nr),ur=w(nr),ar=Y("script",r=>{var{src:e}=r;return v()&&!!e&&!document.querySelector('script[src="'+e+'"]')}),cr=()=>{var[e,a]=u(),c=r(new Map),i=r(new Set),o=t(r=>{if("string"==typeof r){var e=r;return r=>{c.current.set(r,e)}}if(r instanceof Element){var n=r,t=r.getAttribute("id");t&&c.current.set(n,t)}},[]);return n(()=>{var r=new IntersectionObserver(r=>{if(r.forEach(r=>{var{isIntersecting:e,target:n}=r;e?i.current.add(n):i.current.delete(n)}),i.current.size){var e=Array.from(i.current).reduce((r,e)=>r.getBoundingClientRect().top<e.getBoundingClientRect().top?r:e),n=c.current.get(e)||(null==e?void 0:e.getAttribute("id"));"string"==typeof n&&a(n)}},{threshold:1});return c.current.forEach((e,n)=>r.observe(n)),()=>r.disconnect()},[]),[e,o]},ir=function(r){void 0===r&&(r="");var[e,n]=u(r);return[e,n,C(n)]},or=function(r,e,n){var t,{leading:u,trailing:a}=void 0===n?{leading:!0,trailing:!0}:n,c=null,i=null,o=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return c=o,null===i&&(u&&(t=r(...c),c=null),i=setTimeout(()=>{a&&null!==c&&(t=r(...c),c=null),i=null},e)),t};return o.cancel=()=>{null!==i&&clearTimeout(i),c=null,i=null},o},lr=m(or),vr=w(or),dr=function(r,e,t){void 0===t&&(t=[e]);var u=i(r);n(()=>{var r=setTimeout(()=>null==u.current?void 0:u.current(),e);return()=>clearTimeout(r)},t)},sr=(e,n)=>{var u=i(e),a=r();return q(()=>{a.current&&(clearTimeout(a.current.handle),a.current.resolve())}),t(()=>new Promise(r=>{a.current&&(clearTimeout(a.current.handle),a.current.resolve());var e=setTimeout(()=>{null==u.current||u.current(),r()},n);a.current={handle:e,resolve:r}}),[u,n])},fr=function(r){void 0===r&&(r=!1);var[e,n]=u(r);return[e,t(()=>n(r=>!r),[]),T(n,null,!0),T(n,null,!1),n]},mr=r=>O(()=>r),gr=function(r,e){return void 0===e&&(e=!0),j(window,"beforeunload",e=>(e.preventDefault(),r&&(e.returnValue=r),r),{enabled:e})},hr=()=>{var[r,e]=u(d);return j(window,"scroll",()=>e(d()),{capture:!1,passive:!0,usingAnimationFrame:!0}),r},wr=()=>{var[r,e]=u(s);return j(window,"resize",()=>e(s())),r},pr=function(e,n,a){void 0===a&&(a=V);var[c,i]=u(a),o=r(),l=t((r,t)=>{o.current&&o.current.terminate();var u=new Worker(e,n);u.addEventListener("message",r=>i({loading:!1,result:r.data})),u.addEventListener("error",r=>i({loading:!1,error:r.error})),u.postMessage(r,t),i(X),o.current=u},[n,e]);return mr(()=>{o.current&&o.current.terminate()}),[c,l]};export{o as useAnimationFrame,h as useAudit,p as useAuditValue,E as useCallbackWithCleanup,A as useCheckInput,b as useCurrent,T as useCurryFunction,F as useDebounce,I as useDebounceValue,q as useDidMount,M as useDidUpdate,O as useEffectOnce,j as useEvent,W as useForceUpdate,x as useFullscreen,y as useHandleChangeCheck,z as useHandleChangeFile,B as useHandleChangeNumber,C as useHandleChangeText,R as useIntersectionObserver,D as useInterval,N as useIsMounted,P as useLazyLoad,G as useLink,K as useMediaQuery,Q as useMutationObserver,U as useNumberInput,Z as useOnClickOutside,$ as usePrevious,_ as usePromise,rr as usePromiseCallback,er as useResizeObserver,tr as useSample,ur as useSampleValue,ar as useScript,cr as useScrollSpy,ir as useTextInput,lr as useThrottle,vr as useThrottleValue,dr as useTimeout,sr as useTimeoutCallback,fr as useToggle,k as useToggleFullscreen,S as useTriggerUpdate,i as useUpdatedRef,mr as useWillUnmount,gr as useWindowBeforeUnload,hr as useWindowScrollOffset,wr as useWindowSize,pr as useWorkerCallback};
//# sourceMappingURL=index.modern.js.map
