import{useRef as r,useLayoutEffect as e,useEffect as n,useReducer as t,useCallback as u,useState as o}from"react";import a from"json2mq";var i=(n,t)=>{var u=r(n);return e(()=>{u.current=n},t),u},c=function(r,e){void 0===e&&(e=[]);var t=i(r);n(()=>{var r=requestAnimationFrame(r=>null==t.current?void 0:t.current(r));return()=>cancelAnimationFrame(r)},e)},l=(r,e)=>{switch(e.type){case"append":return[...r,e.payload];case"prepend":return[e.payload,...r];case"filter":return r.filter(e.payload);default:return r}},v=function(r){void 0===r&&(r=[]);var[e,n]=t(l,r);return[e,u(r=>n({type:"append",payload:r}),[n]),u(r=>n({type:"prepend",payload:r}),[n]),u(r=>n({type:"filter",payload:r}),[n])]},d=()=>({}),s=()=>"undefined"!=typeof window&&void 0!==window.document,f=()=>s()?{x:window.scrollX,y:window.scrollY}:{},m=()=>s()?{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}:{},g=r=>(r=>r instanceof Object&&r.nativeEvent instanceof Event)(r)&&r.persist(),h=e=>(t,o,a)=>{var c=i(t),l=r(e(t,o,a));return n(()=>(l.current=e(function(){return c.current(...arguments)},o,a),()=>{var r;return null==(r=l.current)?void 0:r.cancel()}),[c,a,o]),u(function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return e.forEach(g),l.current(...e)},[])},p=(r,e)=>{var n,t=null,u=null,o=function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return u=a,null===t&&(t=setTimeout(()=>{null!==u&&(n=r(...u),u=null),t=null},e)),n};return o.cancel=()=>{null!==t&&clearTimeout(t),t=null,u=null},o},y=h(p),w=e=>(t,u,a,c)=>{var[l,v]=o(),d=i(t),s=r(e(t,a,c));return n(()=>(s.current=e(function(){var r=d.current(...arguments);return v(r),r},a,c),()=>{var r;return null==(r=s.current)?void 0:r.cancel()}),[d,c,a]),n(()=>{s.current(...u)},u),l},E=w(p),b=(r,e,n)=>{var t;r&&(!n||(t=e.target)instanceof Object&&"matches"in t&&e.target.matches(n))&&r(e)},A=function(e,t,u,o){var{capture:a,once:c,passive:l,selectors:v,usingAnimationFrame:d,enabled:s=!0}=void 0===o?{}:o,f=i(u),m=r(0);n(()=>{if(s){var r=(r=>r instanceof Function?r():r)(e);if(r){var n=r=>{d?(cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>b(f.current,r,v))):b(f.current,r,v)},u=Array.isArray(t)?t:[t];return u.forEach(e=>r.addEventListener(e,n,{capture:a,once:c,passive:l})),()=>{d&&m.current&&cancelAnimationFrame(m.current),u.forEach(e=>r.removeEventListener(e,n,{capture:a}))}}}},[e,a,c,l,v,d,s,...t])},T=function(r,e){return void 0===r&&(r=!0),void 0===e&&(e=""),A(window,"beforeunload",n=>{if("function"==typeof r?r():r)return n.preventDefault(),n.returnValue=e,e})},O=function(e,n){void 0===n&&(n=[]);var t=i(e),o=r();return u(function(){o.current&&o.current();for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];o.current=null==t.current?void 0:t.current(...e)},n)},L=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return u(r=>{var{target:{checked:n}}=r;return e.forEach(r=>null==r?void 0:r(Boolean(n)))},e)},F=function(r){void 0===r&&(r=!1);var[e,n]=o(r);return[e,n,L(n)]},I=e=>{var n=r(e);return{set:r=>{n.current=r},get:()=>n.current,is:r=>n.current===r}},j=function(r,e){void 0===e&&(e=null);for(var n=arguments.length,t=new Array(n>2?n-2:0),o=2;o<n;o++)t[o-2]=arguments[o];return u(function(){for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return null==r?void 0:r.apply(e,[...t,...u])},[r,...t])},k=function(r,e,n){var t,{leading:u,trailing:o}=void 0===n?{trailing:!0}:n,a=null,i=null,c=function(){for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return a=c,null!==i?clearTimeout(i):u&&(t=r(...a),a=null),i=setTimeout(()=>{o&&null!==a&&(t=r(...a),a=null),i=null},e),t};return c.cancel=()=>{null!==i&&clearTimeout(i),a=null,i=null},c},S=h(k),q=w(k),M=r=>n(r,[]),x=r=>M(r),H=(e,t)=>{var u=r(!1);n(u.current?e:()=>{u.current=!0},t)},C=function(r,e,t){void 0===t&&(t=[]);var u=i(e);n(()=>{var e=u.current,n=("function"==typeof e?e():document.querySelector(e))||document.createElement("link");n instanceof HTMLLinkElement&&(Object.assign(n,r),document.head.appendChild(n))},t)},W=r=>C({href:r,rel:"shortcut icon",type:"image/x-icon"},"link[rel='shortcut icon']",[r]);function B(){return(B=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r}).apply(this,arguments)}function P(r,e){if(null==r)return{};var n,t,u={},o=Object.keys(r);for(t=0;t<o.length;t++)e.indexOf(n=o[t])>=0||(u[n]=r[n]);return u}var z={loading:!1},D={loading:!0},R=function(r,e,t,u){void 0===e&&(e=[]),void 0===t&&(t=z);var[a,i]=o(t);return n(()=>{var e=!1,n=r();if(n)return i(D),n.then(r=>{e||i({loading:!1,result:r})}).catch(r=>{e||i({loading:!1,error:r})}),()=>{e=!0,null==u||u()};i(z)},e),a};class V extends Error{constructor(r,e){super(r||"Fetch Error"),this.status=e}}var N=(e,n)=>(t,u,o,a)=>{var i=r();return R(async()=>{var r=new AbortController;i.current=r;var o=await e(t,B({},u,{signal:r.signal}));if(o.ok)return await n(o);throw new V(o.statusText,o.status)},o,a,()=>{var r;return null==(r=i.current)?void 0:r.abort()})},U=N(fetch,r=>r.json()),X=N(fetch,r=>r.arrayBuffer()),Y=N(fetch,r=>r.blob()),G=N(fetch,r=>r.formData()),J=N(fetch,r=>Promise.resolve(r.body)),K=N(fetch,r=>r.text()),Q=()=>t(d,{}),Z=()=>Q()[1],$=function(r,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var t=u(e=>{var n;!document.fullscreenElement||!1!==e&&void 0!==e||document.exitFullscreen(),document.fullscreenElement||!0!==e&&void 0!==e||null==(n=r.current)||null==n.requestFullscreen||n.requestFullscreen()},[r]);return A(document,"fullscreenchange",e),A(document,"fullscreenerror",n),t},_=r=>{var[e,n]=o(!1),t=$(r,()=>n(!!document.fullscreenElement&&document.fullscreenElement===r.current));return[e,t,j(t,null,!0),j(t,null,!1)]},rr=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return u(r=>{var{target:{files:n}}=r;return e.forEach(r=>null==r?void 0:r(n))},e)},er=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return u(r=>{var{target:{value:n}}=r;return e.forEach(r=>null==r?void 0:r(Number(n)))},e)},nr=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return u(r=>{var{target:{value:n}}=r;return e.forEach(r=>null==r?void 0:r(String(n)))},e)},tr=function(r,n,t,u){void 0===u&&(u=[]);var o=i(n);e(()=>{var e=r();if(e&&e.length){var n=new IntersectionObserver((r,e)=>null==o.current?void 0:o.current(r,e),t);return e.forEach(r=>n.observe(r)),()=>n.disconnect()}},u)},ur=r=>r instanceof Object,or=function(e,n){var t=r(!1),u="boolean"==typeof(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:void 0,o=ur(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:ur(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:void 0;tr(()=>e.current&&[e.current],async r=>{if(!(u||t.current||r.every(r=>{var{isIntersecting:e}=r;return!e}))){t.current=!0;try{await Promise.resolve(n())}catch(r){}t.current=!1}},o)},ar=(r,e,n)=>tr(()=>r.current&&[r.current],e,n,[n]),ir=(r,e)=>{var{period:t,leading:u,running:o,deps:a=[t,u,o]}=e,c=i(r);n(()=>{var r;return o&&(u&&(null==c.current||c.current()),r=setInterval(()=>null==c.current?void 0:c.current(),t)),()=>{r&&clearInterval(r)}},a)},cr=()=>{var e=r(!1);return M(()=>(e.current=!0,()=>{e.current=!1})),u(()=>e.current,[])},lr=r=>r.dataset.src,vr=function(e){void 0===e&&(e={});var{getSrc:n=lr}=e,t=P(e,["getSrc"]),o=r(new Map),a=u(r=>{if("string"==typeof r){var e=r;return r=>{o.current.set(r,e)}}if(r instanceof HTMLImageElement){var t=r,u=n(t);u&&o.current.set(t,u)}},[n]);return tr(()=>Array.from(o.current.keys()),(r,e)=>r.forEach(r=>{var{isIntersecting:t,target:u}=r;if(t&&u instanceof HTMLImageElement){var a=o.current.get(u)||n(u);a&&(u.src=a),e.unobserve(u)}}),t),a},dr=(r,e,t)=>function(u,a){void 0===a&&(a=z);var i=cr(),[c,l]=o(a);return n(()=>{if(e(u)){var n=u.id&&document.querySelector(r+"#"+u.id)||document.createElement(r);Object.assign(n,u);var o=()=>{i()&&l(z)},a=r=>{i()&&l({loading:!1,error:r.error})};return n.addEventListener("load",o,!1),n.addEventListener("error",a,!1),l(D),t(n),()=>{n.removeEventListener("load",o,!1),n.removeEventListener("error",a,!1)}}l(z)},[u,i]),c},sr=dr("link",r=>{var{href:e}=r;return s()&&!!e&&!document.querySelector('link[href="'+e+'"]')},r=>document.head.appendChild(r)),fr=r=>{return e=r,Object.fromEntries(["matches","media"].map(r=>[r,e[r]]));var e},mr=function(r,e){void 0===e&&(e={media:"",matches:!1});var t="string"==typeof r?r:a(r),[u,i]=o(s()?()=>fr(window.matchMedia(t)):e);return n(()=>{var r=window.matchMedia(t),e=r=>{i(r)};return i(fr(r)),r.addListener(e),()=>r.removeListener(e)},[t]),u},gr=(r,n,t)=>{var u=i(n);e(()=>{if(r.current){var e=new MutationObserver((r,e)=>null==u.current?void 0:u.current(r,e));return e.observe(r.current,t),()=>e.disconnect()}},[u,r,t])},hr=function(r){void 0===r&&(r=0);var[e,n]=o(r);return[e,n,er(n)]},pr=(r,e)=>A(document,["mousedown","touchstart"],n=>{e&&r.current&&!r.current.contains(n.target)&&e(n)}),yr=r=>A(document,"visibilitychange",()=>null==r?void 0:r(document.visibilityState)),wr=()=>{var[r,e]=o(document.visibilityState);return yr(e),r},Er=e=>{var t=r();return n(()=>{t.current=e}),t.current},br=function(r,e,n){void 0===e&&(e=[]),void 0===n&&(n=z);var t=cr(),[a,i]=o(n),c=I();return[a,u(function(){var e=r(...arguments);c.set(e),e?(i(D),e.then(r=>{c.is(e)&&t()&&i({loading:!1,result:r})}).catch(r=>{c.is(e)&&t()&&i({loading:!1,error:r})})):i(z)},e)]},Ar=(r,n)=>{var t=i(n);e(()=>{if(r.current){var e=new ResizeObserver(r=>null==t.current?void 0:t.current(r));return e.observe(r.current),()=>e.disconnect()}},[t,r])},Tr=(r,e)=>{var n,t=null,u=setInterval(()=>{t&&(n=r(...t),t=null)},e),o=function(){for(var r=arguments.length,e=new Array(r),u=0;u<r;u++)e[u]=arguments[u];return t=e,n};return o.cancel=()=>{clearInterval(u),t=null},o},Or=h(Tr),Lr=w(Tr),Fr=dr("script",r=>{var{src:e}=r;return s()&&!!e&&!document.querySelector('script[src="'+e+'"]')},r=>document.body.appendChild(r)),Ir=r=>null==r?void 0:r.getAttribute("id"),jr=function(e){void 0===e&&(e={threshold:1});var{getId:n=Ir}=e,t=P(e,["getId"]),[a,i]=o(),c=r(new Map),l=r(new Set),v=u(r=>{if("string"==typeof r){var e=r;return r=>{c.current.set(r,e)}}if(r instanceof Element){var t=r,u=n(t);u&&c.current.set(t,u)}},[n]);return tr(()=>Array.from(c.current.keys()),r=>{if(r.forEach(r=>{var{isIntersecting:e,target:n}=r;e?l.current.add(n):l.current.delete(n)}),l.current.size){var e=Array.from(l.current).reduce((r,e)=>r.getBoundingClientRect().top<e.getBoundingClientRect().top?r:e),t=c.current.get(e)||n(e);"string"==typeof t&&i(t)}},t),[a,v]},kr=function(r){void 0===r&&(r="");var[e,n]=o(r);return[e,n,nr(n)]},Sr=function(r,e,n){var t,{leading:u,trailing:o}=void 0===n?{leading:!0,trailing:!0}:n,a=null,i=null,c=function(){for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return a=c,null===i&&(u&&(t=r(...a),a=null),i=setTimeout(()=>{o&&null!==a&&(t=r(...a),a=null),i=null},e)),t};return c.cancel=()=>{null!==i&&clearTimeout(i),a=null,i=null},c},qr=h(Sr),Mr=w(Sr),xr=function(r,e,t){void 0===t&&(t=[e]);var u=i(r);n(()=>{var r=setTimeout(()=>null==u.current?void 0:u.current(),e);return()=>clearTimeout(r)},t)},Hr=(e,n)=>{var t=i(e),o=r();return x(()=>{o.current&&(clearTimeout(o.current.handle),o.current.resolve())}),u(()=>new Promise(r=>{o.current&&(clearTimeout(o.current.handle),o.current.resolve());var e=setTimeout(()=>{null==t.current||t.current(),r()},n);o.current={handle:e,resolve:r}}),[t,n])},Cr=r=>M(()=>r),Wr=(e,t)=>{var u=r(document.title);n(()=>{document.title=e},[e]),Cr(()=>{(null==t?void 0:t.restoreOnUnmount)&&(document.title=u.current)})},Br=function(r){void 0===r&&(r=!1);var[e,n]=o(r);return[e,u(()=>n(r=>!r),[]),j(n,null,!0),j(n,null,!1),n]},Pr=function(r,e){return void 0===e&&(e=!0),A(window,"beforeunload",e=>(e.preventDefault(),r&&(e.returnValue=r),r),{enabled:e})},zr=()=>{var[r,e]=o(f);return A(window,"scroll",()=>e(f()),{capture:!1,passive:!0,usingAnimationFrame:!0}),r},Dr=()=>{var[r,e]=o(m);return A(window,"resize",()=>e(m())),r},Rr=function(e,n,t){void 0===t&&(t=z);var[a,i]=o(t),c=r(),l=u((r,t)=>{c.current&&c.current.terminate();var u=new Worker(e,n);u.addEventListener("message",r=>i({loading:!1,result:r.data})),u.addEventListener("error",r=>i({loading:!1,error:r.error})),u.postMessage(r,t),i(D),c.current=u},[n,e]);return Cr(()=>{c.current&&c.current.terminate()}),[a,l]};export{c as useAnimationFrame,v as useArray,y as useAudit,E as useAuditValue,T as useBeforeUnload,O as useCallbackWithCleanup,F as useCheckInput,I as useCurrent,j as useCurryFunction,S as useDebounce,q as useDebounceValue,x as useDidMount,H as useDidUpdate,M as useEffectOnce,A as useEvent,W as useFavicon,U as useFetch,X as useFetchArrayBuffer,Y as useFetchBlob,G as useFetchFormData,J as useFetchStream,K as useFetchText,Z as useForceUpdate,_ as useFullscreen,L as useHandleChangeCheck,rr as useHandleChangeFile,er as useHandleChangeNumber,nr as useHandleChangeText,or as useInfiniteScroll,ar as useIntersectionObserver,tr as useIntersectionObserverEffect,ir as useInterval,cr as useIsMounted,vr as useLazyLoad,sr as useLink,mr as useMediaQuery,gr as useMutationObserver,hr as useNumberInput,pr as useOnClickOutside,yr as usePageVisibility,wr as usePageVisibilityState,Er as usePrevious,R as usePromise,br as usePromiseCallback,Ar as useResizeObserver,Or as useSample,Lr as useSampleValue,Fr as useScript,jr as useScrollSpy,kr as useTextInput,qr as useThrottle,Mr as useThrottleValue,xr as useTimeout,Hr as useTimeoutCallback,Wr as useTitle,Br as useToggle,$ as useToggleFullscreen,Q as useTriggerUpdate,C as useUpdatedLink,i as useUpdatedRef,Cr as useWillUnmount,Pr as useWindowBeforeUnload,zr as useWindowScrollOffset,Dr as useWindowSize,Rr as useWorkerCallback};
//# sourceMappingURL=index.modern.js.map
